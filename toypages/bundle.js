!function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module){!function(define){"use strict";define(function(require){return function(loader){loader.addModule("base",{}),loader.loadModule(require("./base/restructure")),loader.loadModule(require("./base/read-write")),loader.loadModule(require("./base/format"))}})}("function"==typeof define&&define.amd?define:function(factory){"use strict";module.exports=factory(require)})},{"./base/format":2,"./base/read-write":3,"./base/restructure":4}],2:[function(require,module){!function(define){"use strict";define(function(require){return function(loader){var utils;utils=require("../utils"),loader.addInstanceMethod("Variable","layOut",function(ncol){var rows,currentRow,i,stringVar,names;for(names=this.names(),stringVar=this.asString(),ncol=Math.floor(ncol),ncol>=1||(ncol=1),rows=[],currentRow=[],i=1;i<=this.length();i+=1)currentRow.push({index:i,value:utils.getDefault(stringVar.get(i),""),name:utils.isMissing(names)?"":names.get(i)}),currentRow.length>=ncol&&(rows.push(currentRow),currentRow=[]);return currentRow.length>0&&rows.push(currentRow),rows}),loader.addInstanceMethod("Variable","toHTML",function(options){function wrap(params){return function(str,others){return"<"+params.tag+' class="'+params.class+'" '+(others||"")+">"+str+"</"+params.tag+">"}}var arr,defaults,makeRow;return defaults={ncol:1,withNames:!1,value:{tag:"td","class":"var-value"},name:{tag:"td","class":"var-name"},row:{tag:"tr","class":"var-row"}},options=utils.mixin({},options,defaults),options.value=utils.mixin(options.value,defaults.value),options.name=utils.mixin(options.name,defaults.name),options.row=utils.mixin(options.row,defaults.row),makeRow=options.withNames?function(row){return row.map(function(obj){return wrap(options.name)(obj.name,'data-relIndex="'+obj.index+'"')+wrap(options.value)(obj.value,'data-relIndex="'+obj.index+'"')}).join("")}:function(row){return row.map(function(obj){return wrap(options.value)(obj.value,'data-relIndex="'+obj.index+'"')}).join("")},arr=this.layOut(options.ncol),arr.map(function(row){return makeRow(row)}).map(wrap(options.row)).join("\n")}),loader.addInstanceMethod("Variable","format",function(options){function nDigits(x){return 0===x?1:Math.abs(Math.log(Math.abs(x))/Math.LN10)}var v,maxDigits;return v=this.asScalar().names(this.names()),options=utils.mixin({},options),options.type||(maxDigits=Math.floor(v.map(nDigits).max()),options.type=maxDigits>4?"scientific":"fixed"),options.decimals>=0||(options.decimals="scientific"===options.type?4:2),v.map(utils.format[options.type](options.decimals),!1,"string")})}})}("function"==typeof define&&define.amd?define:function(factory){"use strict";module.exports=factory(require)})},{"../utils":10}],3:[function(require,module){!function(define){"use strict";define(function(require){return function(loader){function quote(options){var replacements;return replacements={"_\\":"\\\\","_	":"\\t","_\n":"\\n","_\r":"\\r"},function(str){return str=str.replace(/[\\\t\n\r]/g,function(m){return replacements["_"+m]}),options.quote?'"'+str.replace(/"/g,options.qescape?'\\"':'""')+'"':str}}function prepareVar(v,options){function killMissing(v){return v.map(function(str){return utils.getDefault(str,"")})}return"scalar"===v.mode?killMissing(v.asString()).toArray():killMissing(v.asString()).toArray().map(quote(options))}function variableInferMode(terms){return terms.filter(utils.isNotMissing).every(function(s){return null!==s.match(regexp.numberlike)})?"scalar":"factor"}function makeVariable(terms,mode){return terms=terms.map(function(val){return""===val?0/0:val}),mode||(mode=variableInferMode(terms)),"scalar"===mode&&(terms=terms.map(parseFloat)),new Variable(terms,{mode:mode})}function inferSep(terms){var sepCounts,seps;return sepCounts={"_	":[],"_,":[],"_;":[],"_ ":[]},seps=Object.keys(sepCounts),terms.forEach(function(term){seps.forEach(function(sep){sepCounts[sep].push(term.separators[sep])})}),sepCounts=new List(sepCounts).reduce(function(acc,arr,i,sep){return arr=Variable.scalar(arr).table().sort(!0),"0"!==arr.names().get(1)&&arr.get(1)>acc.freq?{freq:arr.get(1),sep:sep}:acc},{freq:-1}),sepCounts.sep}function tokenize(re,s,f){var m,arr=[];for("undefined"==typeof f&&(f=function(x){return x}),re.lastIndex=0;null!==(m=re.exec(s))&&""!==m[0];)arr.push(f(m));return arr}function tokenizeDatasetLine(line){var obj;return obj={tokens:[],separators:{"_	":0,"_,":0,"_;":0,"_ ":0}},obj.line=line.replace(regexp.datasetTerm,function(m,p1,p2,p3){return obj.tokens.push(cleanMatch([m,p1,p2,p3])),obj.tokens.length}),(obj.line.match(regexp.datasetSeparators)||[]).forEach(function(sep){obj.separators["_"+(1===sep.length?sep:" ")]+=1}),obj}function makeLineTokenizer(str){function preprocess(line){return line.replace(pattern2,function(m,s){return s?s:""})}var obj,pattern,pattern2;return obj={"_	":{term:"([^\\t\\n]*)",sep:"\\t",junk:" *"},"_,":{term:"([^,\\n]*)",sep:",",junk:"[\\t ]*"},"_;":{term:"([^;\\n]*)",sep:";",junk:"[\\t ]*"},"_ ":{term:"([^\\s]*)",sep:"[ \\t]+",junk:""}},pattern='(?:"('+reString.doubleQuoteContent+")\"|'("+reString.singleQuoteContent+")'|"+obj[str].term+")(?:"+obj[str].sep+")?",pattern=new RegExp(pattern,"g"),pattern2=obj[str].junk+"("+obj[str].sep+")"+obj[str].junk+"|^"+obj[str].junk+"|"+obj[str].junk+"$",pattern2=new RegExp(pattern2,"g"),function(line){return tokenize(pattern,preprocess(line),cleanMatch)}}function columnize(rows){var numCol,i,cols;for(cols=[],numCol=rows.reduce(function(maxLen,row){return Math.max(row.length,maxLen)},0),i=0;numCol>i;i+=1)cols.push([]);return rows.forEach(function(row){cols.forEach(function(col,j){col.push(utils.getDefault(row[j],utils.missing))})}),cols}function cleanMatch(m){return"undefined"!=typeof m[1]?quoteUnescape(m[1],'"'):"undefined"!=typeof m[2]?quoteUnescape(m[2],"'"):quoteUnescape(m[3],"")}var Variable,List,Dataset,reString,regexp,quoteUnescape,utils,writeDefaults;Variable=loader.getClass("Variable"),List=loader.getClass("List"),Dataset=loader.getClass("Dataset"),utils=require("../utils"),writeDefaults={sep:",",header:!0,quote:!1,qescape:!1},reString={},reString.doubleQuoteContent='(?:""|\\\\"|\\\\\\\\|[^"])*',reString.singleQuoteContent="(?:''|\\\\'|\\\\\\\\|[^'])*",reString.variableSeparators="(?:^|[\\s\\n;,]+)",reString.datasetSeparators="[\\t;,]| +",reString.regularTerm="[^\\s\\n;,]+",reString.variableTerm=reString.variableSeparators+'(?:"('+reString.doubleQuoteContent+")\"|'("+reString.singleQuoteContent+")'|("+reString.regularTerm+"))",reString.datasetTerm='(?:"('+reString.doubleQuoteContent+")\"|'("+reString.singleQuoteContent+")'|("+reString.regularTerm+"))",reString.numberlike="^\\s*[+-]?(?:\\d+\\.?|\\.\\d+)\\d*(?:[eE][+-]?\\d+)?\\s*$",regexp={},["variableTerm","datasetTerm","datasetSeparators","numberlike"].forEach(function(key){regexp[key]=new RegExp(reString[key],"g")}),loader.addClassMethod("Variable","read",function(vals,mode){return makeVariable(tokenize(regexp.variableTerm,vals,cleanMatch),mode)}),loader.addInstanceMethod("Variable","write",function(options){return options=utils.mixin({},options,writeDefaults),prepareVar(this,options).join(options.sep)}),loader.addClassMethod("Dataset","read",function(vals,options){function makeVar(row){return makeVariable(row)}var terms,headings;return options=options||{},vals=vals.replace(/\r/g,"").split("\n"),options.sep||(terms=vals.map(tokenizeDatasetLine),options.sep=inferSep(terms)),terms=vals.map(makeLineTokenizer(options.sep)),terms=terms.filter(function(arr){return arr.length>0}),terms=columnize(terms),null==options.header&&(options.header=!1),options.header===!0?(headings=[],terms.forEach(function(row){headings.push(row.shift())}),new Dataset(terms.map(makeVar)).names(headings)):new Dataset(terms.map(makeVar))}),loader.addInstanceMethod("Dataset","write",function(options){function addHeader(arr,name){return options.header&&arr.unshift(quote(options)(name)),arr}function prepVar(v,i,name){return addHeader(prepareVar(v,options),name)}var rows,row,cols;return options=utils.mixin({},options,writeDefaults),cols=this.map(prepVar),rows=[],cols.get(1).forEach(function(col,i){row=[],cols.each(function(col){row.push(col[i])}),rows.push(row.join(options.sep))}),rows.join("\n")+"\n"}),quoteUnescape=function(dict){function lookup(c){return obj[c]||c[1]}var obj;return obj={"\\n":"\n","\\t":"	","\\r":"\r",'""':'"',"''":"'"},function(s,q){return s.replace(dict[q],lookup)}}({'"':/\\.|""/g,"'":/\\.|''/g,"":/\\./g})}})}("function"==typeof define&&define.amd?define:function(factory){"use strict";module.exports=factory(require)})},{"../utils":10}],4:[function(require,module){!function(define){"use strict";define(function(require){return function(loader){var Variable,List,utils;Variable=loader.getClass("Variable"),List=loader.getClass("List"),utils=require("../utils"),loader.addInstanceMethod("Dataset","split",function(select){var that=this;return"function"==typeof select&&(select=Variable.tabulate(function(i){return select(that.rowFun(i),i)},1,that.nrow,{mode:"factor"})),select instanceof Variable&&(select=select.groupIndices()),select.map(function(val){return that.get(val,!0)})}),loader.addInstanceMethod("Variable","groupIndices",function(){var arr,levels,that=this;return"factor"!==that.mode&&"ordinal"!==that.mode&&(that=Variable.factor(that.toArray())),levels=that.levels(),arr=new Variable.Vector(function(){return[]},levels.length).get(),that.values.each(function(c,i){utils.isMissing(c)?(arr[levels.length]=arr[levels.length]||[],arr[levels.length].push(i)):arr[c-1].push(i)}),arr.length!==levels.length&&levels.push(utils.missing),new List(arr).names(levels)})}})}("function"==typeof define&&define.amd?define:function(factory){"use strict";module.exports=factory(require)})},{"../utils":10}],5:[function(require,module){!function(define){"use strict";define(function(require){function Dataset(values){return(arguments.length>1||utils.isOfType(values,[List,Variable,Variable.Vector,Variable.Matrix]))&&(values=[].slice.call(arguments)),List.call(this,values),normalizeList(this).unnest(1/0),this.each(function(val,i){List.prototype.set.call(this,i,new Variable(val))}.bind(this)),validateLengths(this),this.ncol=this.length(),this.nrow=0===this.ncol?0:this.values[1].length(),sanitizeNames(this)}function validateLengths(dSet){return dSet.reduce(function(acc,val){if(null===acc)return val.length();if(acc!==val.length())throw new Error("Dataset columns have unequal length.");return acc},null),dSet}function normalizeList(list){var listSet;return listSet=List.prototype.set,list.each(function(val,i){val instanceof List?normalizeList(val):val instanceof Variable.Matrix?listSet.call(list,i,normalizeList(List.call({},val.toArray()))):val instanceof Variable||listSet.call(list,i,new Variable(val))}),list}function getColumns(cols,that){if(cols===!0)return utils.seq(that.length());if("number"==typeof cols||"string"==typeof cols)return[cols];if("function"==typeof cols)return utils.seq(that.length()).filter(function(j){return cols(that._names[j],j)});if(cols=Variable.oneDimToVariable(cols),"logical"===cols.mode()){if(that.ncol!==cols.length())throw new Error("Logical vector does not match nCol");cols=cols.which()}return cols.get()}function getRows(rows,that){if(rows===!0)return utils.seq(that.nrow);if("function"==typeof rows)return utils.seq(that.nrow).filter(function(i){return rows(that.rowFun(i),i)});if("number"==typeof rows)return[rows];if(rows=Variable.oneDimToVariable(rows),"logical"===rows.mode()){if(that.nrow!==rows.length())throw new Error("Logical vector does not match nRow");rows=rows.which()}return rows.get()}function getValsFunction(vals,that,rows,cols){if("function"==typeof vals)return vals;if(vals=Variable.oneDimToArray(vals),Array.isArray(vals)&&(vals=new Variable.Matrix(vals,1===rows.length?{nrow:1}:{ncol:1})),utils.isOfType(vals,[Variable.Matrix,Dataset])){if(rows.length!==vals.nrow||cols.length!==vals.ncol)throw new Error("incompatible dims in two-dimensional Dataset set");return rows=utils.arrayToObject(rows),cols=utils.arrayToObject(cols),function(i,j){return vals.get(rows[i],cols[j])}}return function(){return vals}}function sanitizeNames(that){function ensureUnique(name){var j=1;if(cache[name]){for(;cache[name+"."+j];)j+=1;name=name+"."+j}return cache[name]=!0,name}var cache={};return that.values.forEach(function(val,i){i>0&&(that._names[i]=ensureUnique(utils.getDefault(that._names[i],"X"+i)))}),that}var List,Variable,utils;return List=require("./list"),Variable=require("./variable"),utils=require("./utils"),Dataset.prototype=Object.create(List.prototype),Dataset.prototype.names=function(){var res;return res=List.prototype.names.apply(this,[].slice.call(arguments)),res!==this?res:sanitizeNames(this)},Dataset.prototype.getVar=function(col){return List.prototype.get.call(this,col).clone()},Dataset.prototype.rowFun=function(i){var that=this;return function(j){return that.getVar(j).get(i)}},Dataset.prototype.get=function(rows,cols){var that=this;return 0===arguments.length?that.toArray():"string"==typeof cols||"number"==typeof cols?"number"==typeof rows?that.getVar(cols).get(rows):that.getVar(cols).select(getRows(rows,that)):(cols=getColumns(cols,that),rows=getRows(rows,that),new Dataset(cols.map(function(col){return List.prototype.get.call(that,col).select(rows)})).names(cols.map(function(col){return"string"==typeof col?col:that.names(col)})))},Dataset.prototype.setVar=function(col,val){if(val=Variable.oneDimToVariable(val),!(val instanceof Variable))throw new Error("Can only setVar with one-dimensional value");if(val.length()!==this.nrow)throw new Error("Attempting to setVar with variable of wrong length");return List.prototype.set.call(this,col,val.clone())},Dataset.prototype.set=function(rows,cols,vals){var that=this;return cols=getColumns(cols,this),rows=getRows(rows,this),vals=getValsFunction(vals,this,rows,cols),cols.forEach(function(j){var myVar=List.prototype.get.call(that,j);myVar.set(rows,function(i){return vals(i,j,that.names(j))})}),this},Dataset.prototype.appendRows=function(rows,values){var oldnrow;if(1===arguments.length&&(values=rows,rows=null==values.nrow?1:values.nrow),values=this===values?values.clone():Variable.oneDimToVector(values),values instanceof Variable.Vector&&(values=new Variable.Matrix(values.get(),{byRow:!0,nrow:1})),null!=values.ncol&&values.ncol!==this.ncol)throw new Error("Incompatible dimensions for appendRows.");return oldnrow=this.nrow,"function"==typeof values&&(values=function(oldValues){return function(i,j,colName){return oldValues(i-oldnrow,j,colName)}}(values)),this.nrow+=rows,this.each(function(val){val.resize(oldnrow+rows,!1)}),this.set(function(row,i){return i>oldnrow},!0,values)},Dataset.prototype.appendCols=function(names,values){var that=this,len=that.length();if(1===arguments.length&&(values=names,names=utils.missing),"function"==typeof values&&(values=new Variable(values,{length:that.nrow})),values=new Dataset(Variable.oneDimToVariable(values)),values.nrow!==this.nrow)throw new Error("mismatch -- Dataset.nrow and num rows in new columns");return List.prototype.each.call(values,function(val,i,name){List.prototype.set.call(that,len+i,val).names(len+i,name)}),that.ncol+=values.ncol,utils.isMissing(names)||Variable.ensureArray(names).forEach(function(name,i){len+i+1<=that.length()&&that.names(len+i+1,name)}),sanitizeNames(that)},Dataset.prototype.which=function(pred){return new Variable(getRows(pred,this))},Dataset.prototype.deleteRows=function(rows){var indices,that=this;return"function"==typeof rows&&(rows=that.which(rows)),rows=Variable.ensureArray(rows),indices=that.which(function(row,i){return-1===rows.indexOf(i)}),that.nrow=indices.length(),that.each(function(col,i){List.prototype.set.call(that,i,col.select(indices))}),that},Dataset.prototype.deleteCols=function(cols){var del;return del=List.prototype.delete.bind(this),cols=List.prototype.getIndexOf.call(this,cols),Array.isArray(cols)?cols.sort(function(a,b){return b>a}).forEach(del):del(cols),this.ncol=this.length(),this},Dataset.prototype.clone=function(){return new Dataset(this)},Dataset.prototype.toArray=function(){return this.values.slice(1).map(function(val){return val.get()})},Dataset})}("function"==typeof define&&define.amd?define:function(factory){"use strict";module.exports=factory(require)})},{"./list":7,"./utils":10,"./variable":11}],6:[function(require,module){!function(define){"use strict";define(function(require){return function(loader){var utils;utils=require("./utils"),loader.addModule("fun",{}),loader.addModuleMethod("fun.interpolate",function(xs,ys){if(xs=xs.hasOwnProperty("toArray")?xs.toArray():xs,ys=ys.hasOwnProperty("toArray")?ys.toArray():ys,xs.length!==ys.length)throw new Error("fun.interpolate: lengths must agree.");return function(x){var i,gamma;if(x<xs[0]||x>xs[xs.length-1])return utils.missing;if(x===xs[xs.length-1])return ys[xs.length-1];for(i=-1;xs[i+1]<=x;)i+=1;return gamma=(x-xs[i])/(xs[i+1]-xs[i]),(1-gamma)*ys[i]+gamma*ys[i+1]}})}})}("function"==typeof define&&define.amd?define:function(factory){"use strict";module.exports=factory(require)})},{"./utils":10}],7:[function(require,module){!function(define){"use strict";define(function(require){function List(values){return this instanceof List?void(Array.isArray(values)?(this.values=[utils.missing].concat(values),this._names=this.values.map(function(){return utils.missing})):(this._names=[utils.missing].concat(Object.keys(values||{})),this.values=this._names.map(function(key){return utils.optionMap(key,function(key){return values[key]})}))):new List(values)}function joinNames(itemName,valueNames,length){if(utils.isMissing(itemName))return Variable.ensureArray(valueNames);if(utils.isMissing(valueNames)){if(1===length)return[itemName];valueNames=Variable.Vector.seq(length)}return Variable.ensureArray(valueNames).map(function(s){return itemName+"."+s})}var Variable,utils;return utils=require("./utils"),Variable=require("./variable"),List.prototype=Object.create({}),List.prototype.names=function(i,newNames){if(0===arguments.length)return utils.allMissing(this._names)?utils.missing:Variable.string(this._names.slice(1));if(arguments.length>1)this._names[i]=newNames;else{if(utils.isMissing(i))return this._names=this.values.map(function(){return utils.missing}),this;if(i instanceof Variable&&(i=i.asString().toArray()),!Array.isArray(i))return this._names[i];if(i.length!==this.length())throw new Error("Incompatible names length");this._names=[utils.missing].concat(i)}return this},List.prototype.length=function(){return this.values.length-1},List.prototype.getIndexOf=function(name){function tester(n){return"number"==typeof n?n:(n=names.indexOf(n),-1===n?utils.missing:n)}var names;return names=this._names,Array.isArray(name)?name.map(tester):tester(name)},List.prototype.get=function(i){return utils.isMissing(i)?this.values.slice(1):this.values[this.getIndexOf(i)]},List.prototype.set=function(i,val){return utils.isMissing(i)?this:"number"==typeof i||"string"==typeof i?this._set(i,val):(Array.isArray(i)?i.forEach(function(v){this._set(this.length()+1,v)}.bind(this)):Object.keys(i).forEach(function(key){this._set(key,i[key])}.bind(this)),this)},List.prototype._set=function(i,val){var name;if(utils.isMissing(i))return this;if("number"==typeof i){if(i=Math.floor(i),1>i)throw new Error("cannot set at negative index: "+i);this.values[i]=val}else name=i,i=this._names.indexOf(name),-1===i&&(i=this.length()+1,this._names[i]=name),this.values[i]=val;return this},List.prototype.delete=function(i){return utils.isMissing(i)?this:(i=this.getIndexOf(i),i>=1&&(this.values.splice(i,1),this._names.splice(i,1)),this)},List.prototype.each=function(f){var i;for(i=1;i<=this.length();i+=1)f(this.values[i],i,this._names[i]);return this},List.prototype.reduce=function(f,initial){var i,acc;for(acc=initial,i=1;i<=this.length();i+=1)acc=f(acc,this.values[i],i,this._names[i]);return acc},List.prototype.map=function(f){var arr;return arr=[],this.each(function(val,i,name){arr.push(f(val,i,name))}),new List(arr).names(utils.optionMap(this.names(),function(nms){return nms.toArray()}))},List.prototype.clone=function(){return this.map(function(val){return val.clone?val.clone():val})},List.prototype.toVariable=function(){var resolvedEntries;return resolvedEntries=this.get().map(function(val){return val instanceof List?val.toVariable():val instanceof Variable?val.clone():(val=Variable.oneDimToVariable(val),val instanceof Variable?val:new Variable([val]))}),resolvedEntries.forEach(function(val,i){val.names(joinNames(this.names(i+1),val.names(),val.length()))}.bind(this)),Variable.concat.apply(null,resolvedEntries)},List.prototype.unnest=function(levels){var i;if(0===arguments.length&&(levels=1),0===levels)return this;for(levels>1&&this.each(function(e){e instanceof List&&e.unnest(levels-1)}),i=this.length();i>0;i-=1)this.values[i]instanceof List&&([].splice.apply(this._names,[i,1].concat(joinNames(this._names[i],this.values[i].names(),this.values[i].length()))),[].splice.apply(this.values,[i,1].concat(this.values[i].get())));return this},List})}("function"==typeof define&&define.amd?define:function(factory){"use strict";module.exports=factory(require)})},{"./utils":10,"./variable":11}],8:[function(require,module){!function(define){"use strict";define(function(require){return function(loader){loader.addModule("stats",{}),loader.loadModule(require("./stats/basic"))}})}("function"==typeof define&&define.amd?define:function(factory){"use strict";module.exports=factory(require)})},{"./stats/basic":9}],9:[function(require,module){!function(define){"use strict";define(function(require){return function(loader){function filterMissing(v,skipMissing){return skipMissing===!0?v.nonMissing():v}var utils,Variable,List;utils=require("../utils"),Variable=loader.getClass("Variable"),List=loader.getClass("List"),loader.addInstanceMethod("Variable","sum",function(skipMissing){return this.asScalar().reduce(utils.op.add,0,skipMissing)}),loader.addInstanceMethod("Variable","mean",function(skipMissing){var v;return v=filterMissing(this.asScalar(),skipMissing),utils.singleMissing(v.sum()/v.length())}),loader.addInstanceMethod("Variable","var",function(skipMissing){var res,K;return res=this.reduce(function(acc,val){return null==K&&(K=val),val-=K,acc.sum+=val,acc.sumSquares+=val*val,acc.length+=1,acc},{sum:0,sumSquares:0,length:0},skipMissing),utils.singleMissing((res.sumSquares-res.sum*res.sum/res.length)/(res.length-1))}),loader.addInstanceMethod("Variable","sd",function(skipMissing){return utils.singleMissing(Math.sqrt(this.var(skipMissing)))}),loader.addInstanceMethod("Variable","min",function(skipMissing){return this.asScalar().reduce(utils.op.min2,1/0,skipMissing)}),loader.addInstanceMethod("Variable","max",function(skipMissing){return this.asScalar().reduce(utils.op.max2,-1/0,skipMissing)}),loader.addInstanceMethod("Variable","order",function(desc){return Variable.scalar(this.toVector().order(desc))}),loader.addInstanceMethod("Variable","sort",function(desc){return this.select(this.toVector().order(desc).toArray())}),loader.addInstanceMethod("Variable","quantile",function(probs,skipMissing){var getQuant,quantiles,names;if(skipMissing===!0)return this.nonMissing().quantile(probs);if(this.hasMissing())throw new Error("missing values in variable and skipMissing not set to true");return probs=Variable.ensureArray(probs),probs.forEach(function(p){if(0>p||p>1)throw new Error('"probs" outside [0, 1]')}),getQuant=function(p){var g,k;return p=p*(this.length()-1)+1,k=Math.floor(p),g=p-k,(1-g)*this.get(k)+g*this.get(k+1)}.bind(this.asScalar().sort()),quantiles=probs.map(utils.makePreserveMissing(getQuant)),names=probs.map(function(p){return utils.optionMap(p,function(p){return 100*p+"%"})}),Variable.scalar(quantiles).names(names)}),loader.addInstanceMethod("Variable","median",function(skipMissing){return this.hasMissing()&&skipMissing!==!0?utils.missing:this.quantile(.5,!0).get(1)}),loader.addInstanceMethod("Variable","fiveNum",function(skipMissing){return this.quantile([0,.25,.5,.75,1],skipMissing).names(["Min","Q1","Median","Q3","Max"])}),loader.addInstanceMethod("Variable","table",function(){var factor,freqs,missing,names;return factor=Variable.factor(this.toArray()).sort(),freqs=[],missing=0,factor.each(function(val){utils.isMissing(val)?missing+=1:freqs[val-1]=freqs[val-1]?freqs[val-1]+1:1}),names=factor.levels(),missing>0&&(freqs.push(missing),names.push(utils.missing)),Variable.scalar(freqs).names(names)}),loader.addInstanceMethod("Variable","scale",function scale(center,scale){return new List({center:center,scale:scale,values:this.map(function(x){return(x-center)/scale})})}),loader.addInstanceMethod("Variable","zscore",function(){return this.scale(this.mean(!0),this.sd(!0))}),loader.addModuleMethod("stats","correlate",function(xs,ys,skipMissing){var M,MTM,V,validIndices;if(!xs.sameLength(ys))throw new Error("correlate requires same-length variables");if(validIndices=Variable.seq(xs.length()).filter(function(i){return utils.isNotMissing(xs.get(i))&&utils.isNotMissing(ys.get(i))}),validIndices.length()!==xs.length()){if(skipMissing!==!0)return utils.missing;xs=xs.get(validIndices),ys=ys.get(validIndices)}return M=new Variable.Matrix([Variable.ensureArray(xs),Variable.ensureArray(ys)]),MTM=M.transpose().mult(M),V=M.mapCol(function(col){return col.reduce(utils.op.add,0)}),M=MTM.pAdd(V.outer(V).sMult(-1/M.nrow)),M.get(1,2)/Math.sqrt(M.get(1,1)*M.get(2,2))})}})}("function"==typeof define&&define.amd?define:function(factory){"use strict";module.exports=factory(require)})},{"../utils":10}],10:[function(require,module){!function(define){"use strict";define(function(){var utils={};return utils.mixin=function(target){var rest=[].slice.call(arguments,1);return rest.forEach(function(o){o&&Object.keys(o).forEach(function(key){target.hasOwnProperty(key)||(target[key]=o[key])})}),target},utils.missing=0/0,utils.isMissing=function(val){return null==val||val!==val},utils.isNotMissing=function(val){return null!=val&&val===val},utils.hasMissing=function(arr){return arr.some(utils.isMissing)},utils.singleMissing=function(val){return utils.isMissing(val)?utils.missing:val},utils.makePreserveMissing=function(f){return function(val){return utils.isMissing(val)?utils.missing:utils.singleMissing(f.apply(null,[].slice.call(arguments)))}},utils.allMissing=function(arr){return arr.every(utils.isMissing)},utils.getDefault=function(val,deflt){return utils.isMissing(val)?deflt:val},utils.optionMap=function(val,f){return utils.isMissing(val)?utils.missing:f(val)},utils.equal=function(a,b){return utils.isMissing(a)?utils.isMissing(b):utils.isNotMissing(b)&&a===b},utils.areEqualArrays=function(A,B){var i;if(A.length!==B.length)return!1;for(i=0;i<A.length;i+=1)if(!utils.equal(A[i],B[i]))return!1;return!0},utils.arrayToObject=function(arr){var obj;return obj={},arr.forEach(function(k,i){obj[k]=i+1}),obj},utils.isOfType=function(v,types){return types.some(function(t){return v instanceof t})},utils.seq=function(from,to,step){var arr=[];for(1===arguments.length&&(to=from,from=1),arguments.length<3&&(step=to>=from?1:-1);(to-from)*step>=0;)arr.push(from),from+=step;return arr},utils.op={},utils.op.add=function(a,b){return a+b},utils.op["+"]=utils.op.add,utils.op.sub=function(a,b){return a-b},utils.op["-"]=utils.op.sub,utils.op.mult=function(a,b){return a*b},utils.op["*"]=utils.op.mult,utils.op.div=function(a,b){return a/b},utils.op["/"]=utils.op.div,utils.op.min2=function(a,b){return Math.min(a,b)},utils.op.max2=function(a,b){return Math.max(a,b)},utils.getOption=function(s,optList,deflt){var i;if(null==s||""===s)return deflt;for(s=s.toLowerCase(),i=0;i<optList.length;i+=1)if(0===optList[i].toLowerCase().indexOf(s))return optList[i];return null},utils.format={scientific:function(decimals){return function(x){return x.toExponential(decimals)}},fixed:function(decimals){return function(x){return x.toFixed(decimals)}}},utils})}("function"==typeof define&&define.amd?define:function(factory){"use strict";module.exports=factory(require)})},{}],11:[function(require,module){!function(define){"use strict";define(function(require){function Variable(values,options){var ret;if(values instanceof Variable)return values.clone();if(options=utils.getDefault(options,{}),"function"==typeof values){if(utils.isMissing(options.length))throw new Error("Variable definition via function requires length option");values=new Vector(values,options.length)}return values=Variable.ensureArray(values),options.mode=utils.getOption(options.mode,Object.keys(Variable.modes))||inferMode(values),ret=new Variable.modes[options.mode](values,options),ret._names=utils.missing,ret.label=options.label||"",ret}function normalizeValue(val,ind){var i;if("function"==typeof val)return Array.isArray(ind)?ind.map(val):val(ind);if(!Array.isArray(val))return utils.singleMissing(val);for(i=0;i<val.length;i+=1)val[i]=utils.singleMissing(val[i]);return val}function normalizeIndices(v,ind){var allNonPos,allNonNeg;if(ind instanceof Variable&&"logical"===ind.mode()){if(!v.sameLength(ind))throw new Error("incompatible lengths");ind=ind.which()}if(ind=normalizeValue(Variable.oneDimToArray(ind)),Array.isArray(ind)){if(allNonPos=ind.every(function(v){return!(v>0)}),allNonNeg=ind.every(function(v){return!(0>v)}),allNonPos)ind=v.values.map(function(val,k){return-1===ind.indexOf(-k)?k:0}).toArray();else if(!allNonNeg)throw new Error("Cannot use both positive and negative indices.");ind=ind.filter(function(v){return 0!==v})}return ind}function inferMode(values){for(var i=0;i<values.length&&utils.isMissing(values[i]);)i+=1;return i>=values.length||"number"==typeof values[i]?"scalar":"boolean"==typeof values[i]?"logical":"factor"}function _lcMode(m1,m2){return"ordinal"===m1&&(m1="factor"),"ordinal"===m2&&(m2="factor"),m1===m2?m1:"string"===m1||"string"===m2?"string":"scalar"}var Vector,utils;return utils=require("./utils"),Variable.prototype=Object.create({}),Variable.Vector=require("linalg-panthr").Vector,Vector=Variable.Vector,Variable.Matrix=require("linalg-panthr").Matrix,Variable.ScalarVar=require("./variable/scalar")(Variable),Variable.LogicalVar=require("./variable/logical")(Variable),Variable.StringVar=require("./variable/string")(Variable),Variable.FactorVar=require("./variable/factor")(Variable),Variable.OrdinalVar=require("./variable/ordinal")(Variable),Variable.DateTimeVar=require("./variable/datetime")(Variable),Variable.modes={scalar:Variable.ScalarVar,logical:Variable.LogicalVar,string:Variable.StringVar,factor:Variable.FactorVar,ordinal:Variable.OrdinalVar,dateTime:Variable.DateTimeVar},Object.keys(Variable.modes).forEach(function(key){Variable.modes[key].prototype.mode=function(){return key}}),Variable.scalar=function(values,label){return new Variable(values,{mode:"scalar",label:label})},Variable.logical=function(values,label){return new Variable(values,{mode:"logical",label:label})},Variable.string=function(values,label){return new Variable(values,{mode:"string",label:label})},Variable.factor=function(values,label){return new Variable(values,{mode:"factor",label:label})},Variable.ordinal=function(values,levels,label){return new Variable(values,Array.isArray(levels)?{mode:"ordinal",levels:levels,label:label}:{mode:"ordinal",label:levels})},Variable.dateTime=function(values,label){return new Variable(values,{mode:"date",label:label})},Variable.tabulate=function(f,from,to,options){var arr,i;for(arr=[],i=from;to>=i;i+=1)arr.push(f(i));return new Variable(arr,options)},Variable.seq=function(from,to,step,options){var args,v;return args=Array.prototype.slice.call(arguments),"object"==typeof args[args.length-1]&&(options=args.pop()),v=Vector.seq.apply(null,args),new Variable(v,options)
},Variable.concat=function(vars){var commonMode,converters,names;return 0===arguments.length?Variable.scalar([]):1===arguments.length?arguments[0]:(vars=[].slice.call(arguments),commonMode=vars.map(function(v){return v.mode()}).reduce(_lcMode),converters={scalar:function(v){return v.asScalar()},string:function(v){return v.asString()},factor:function(v){return v.asString()}},names=utils.missing,vars.every(function(v){return utils.isMissing(v.names())})||(names=[].concat.apply([],vars.map(function(v){return utils.getDefault(v.names(),Vector.const(utils.missing,v.length())).toArray()}))),converters[commonMode]&&(vars=vars.map(converters[commonMode])),vars=vars.map(function(v){return v.get()}),new Variable([].concat.apply([],vars),{mode:commonMode}).names(names))},Variable.ensureArray=function(val){return val=Variable.oneDimToArray(val),Array.isArray(val)||(val=[val]),normalizeValue(val)},Variable.oneDimToArray=function(val){return utils.isOfType(val,[Variable,Vector])?val.get():val},Variable.oneDimToVector=function(val){return val instanceof Variable&&(val=val.get()),Array.isArray(val)?new Vector(val):val},Variable.oneDimToVariable=function(val){return Array.isArray(val)?new Variable(val):val instanceof Vector?new Variable(val):val},Variable.prototype.asScalar=function(){return new Variable(this.values)},Variable.prototype.asString=function(){return Variable.string(this.values.map(utils.makePreserveMissing(function(val){return""+val})))},Variable.prototype.get=function(i){return this._get(normalizeIndices(this,i))},Variable.prototype._get=function(i){return utils.isMissing(i)?this.values.toArray():this.values.get(i)},Variable.prototype.toArray=function(){return this.get()},Variable.prototype.toVector=function(){return this.values},Variable.prototype.set=function(i,val){if(i=normalizeIndices(this,i),val=val instanceof Variable?val.get():normalizeValue(val,i),utils.isMissing(i)||Array.isArray(i)&&utils.hasMissing(i))throw new Error('Missing indices not allowed in "set"');return this._set(i,val)},Variable.prototype._set=function(i,val){return this.values.set(i,val),this},Variable.prototype.length=function(){return this.values.length},Variable.prototype.names=function(newNames){var len=this.length();return 0===arguments.length?this._names:(this._names=utils.optionMap(newNames,function(names){return Variable.string(names).resize(len)}),this)},Variable.prototype.clone=function(){return this.select(Vector.seq(this.length()))},Variable.prototype.levels=function(){throw new Error('"levels" only applicable for factor/ordinal variables')},Variable.prototype.getCodes=function(){throw new Error('"getCodes" only applicable for factor/ordinal variables')},Variable.prototype.which=function(){throw new Error('"which" only applicable for logical variables')},Variable.prototype.reproduce=function(newValues,newNames){var newVar;return newVar=new Variable(newValues,{mode:this.mode(),label:this.label}),newNames?newVar.names(newNames):newVar},Variable.prototype.select=function(indices){return indices=Variable.oneDimToArray(indices),utils.isMissing(this._names)?this.reproduce(this.values.get(indices)):this.reproduce(this.values.get(indices),this.names().get(indices))},Variable.prototype.rep=function(times){return times instanceof Variable&&(times=times.values),this.select(Vector.seq(this.length()).rep(times))},Variable.prototype.resize=function(length,fill){return fill!==!0&&(fill=function(){return utils.missing}),this.values=this.values.resize(length,fill),utils.isMissing(this._names)||(this._names=this._names.resize(length)),this},Variable.prototype.concat=function(vars){return vars=[].slice.call(arguments),vars.unshift(this),Variable.concat.apply(null,vars)},Variable.prototype.each=function(f,skipMissing){var f2;f2=skipMissing!==!0?f:function(val,i){utils.isNotMissing(val)&&f(val,i)},this.values.each(f2)},Variable.prototype.reduce=function(f,initial,skipMissing){var f2;return f2=skipMissing!==!0?f:function(acc,val,i){return utils.isMissing(val)?acc:f(acc,val,i)},utils.singleMissing(this.values.reduce(f2,initial))},Variable.prototype.map=function(f,skipMissing,mode){var f2;return 2===arguments.length&&"string"==typeof skipMissing&&(mode=skipMissing,skipMissing=!1),mode&&(mode={mode:mode}),f2=skipMissing!==!0?f:utils.makePreserveMissing(f),new Variable(this.values.map(f2),mode).names(this.names())},Variable.prototype.filter=function(pred){var arr;return arr=[],this.values.each(function(val,i){pred(val,i)&&arr.push(i)}),this.select(arr)},Variable.prototype.nonMissing=function(){return this.filter(utils.isNotMissing)},Variable.prototype.hasMissing=function(){return utils.hasMissing(this.toArray())},Variable.prototype.sameLength=function(other){return this.values.length===other.values.length},Variable})}("function"==typeof define&&define.amd?define:function(factory){"use strict";module.exports=factory(require)})},{"./utils":10,"./variable/datetime":12,"./variable/factor":13,"./variable/logical":14,"./variable/ordinal":15,"./variable/scalar":16,"./variable/string":17,"linalg-panthr":20}],12:[function(require,module){!function(define){"use strict";define(function(require){return function(Variable){function DateTimeVar(values,options){this.values=null==options.format?0===values.length||"number"==typeof values[0]?values.slice():values.map(utils.makePreserveMissing(function(val){return moment(val).valueOf()})):values.map(utils.makePreserveMissing(function(val){return moment(val,options.format).valueOf()})),this.values=new Variable.Vector(this.values).mutable(!0)}var moment,utils;return moment=require("moment"),utils=require("./../utils"),DateTimeVar.prototype=Object.create(Variable.prototype),DateTimeVar.prototype._set=function(i,val,format){function getMillis(val){return Array.isArray(val)?val.map(getMillis):utils.singleMissing("string"==typeof val?f(val):val)}var f=null==format?function(s){return moment(s)}:function(s){return moment(s,format)};this.values.set(i,getMillis(val))},DateTimeVar.prototype.asString=function(){return this.map(function(val){return moment(val).format()},!0,"string")},DateTimeVar}})}("function"==typeof define&&define.amd?define:function(factory){"use strict";module.exports=factory(require)})},{"./../utils":10,moment:51}],13:[function(require,module){!function(define){"use strict";define(function(require){return function(Variable){function FactorVar(values){this.levels(values.slice().sort()),this.values=new Variable.Vector(this.getCodes(values)).mutable(!0)}var utils;return utils=require("./../utils"),FactorVar.prototype=Object.create(Variable.prototype),FactorVar.prototype.levels=function(arr){var i;if(0===arguments.length)return this.c2v.slice(1);for(this.c2v=[utils.missing],this.v2c={},i=0;i<arr.length;i+=1)utils.isNotMissing(arr[i])&&!this.v2c.hasOwnProperty(arr[i])&&(this.v2c[arr[i]]=this.c2v.length,this.c2v.push(arr[i].toString()));return this},FactorVar.prototype.getCodes=function(values){var v2c=this.v2c;return values.map(utils.makePreserveMissing(function(val){return v2c[val]}))},FactorVar.prototype._get=function(i){var c2v=this.c2v;return utils.isMissing(i)&&(i=null),"number"==typeof i?utils.singleMissing(c2v[this.values.get(i)]):this.values.get(i).map(utils.makePreserveMissing(function(code){return c2v[code]}))},FactorVar.prototype._set=function(i,val){function getCode(val){if(Array.isArray(val))return val.map(getCode);if(utils.isMissing(val))return utils.missing;if("string"==typeof val){if(!v2c.hasOwnProperty(val))throw new Error("Invalid value for factor");return v2c[val]}if(isNaN(val)||1>val||val>=c2v.length)throw new Error("Invalid value for factor");return Math.floor(val)}var c2v=this.c2v,v2c=this.v2c;return 1===arguments.length?this.values.set(getCode(i)):this.values.set(i,getCode(val)),this},FactorVar.prototype.reproduce=function(newValues,newNames){var newVar;return newValues=newValues.map(function(code){return this.c2v[code]}.bind(this)),newVar=new Variable(newValues,{mode:this.mode(),label:this.label,levels:this.levels()}),newNames?newVar.names(newNames):newVar},FactorVar.prototype.asString=function(){return Variable.string(this.get())},FactorVar}})}("function"==typeof define&&define.amd?define:function(factory){"use strict";module.exports=factory(require)})},{"./../utils":10}],14:[function(require,module){!function(define){"use strict";define(function(require){return function(Variable){function LogicalVar(values){this.values=new Variable.Vector(values).mutable(!0)}var utils;return utils=require("./../utils"),LogicalVar.prototype=Object.create(Variable.prototype),LogicalVar.prototype.asScalar=function(){return new Variable(this.values.map(utils.makePreserveMissing(function(val){return val===!0?1:0})))},LogicalVar.prototype.which=function(){var arr;return arr=[],this.values.forEach(function(v,i){v!==!1&&arr.push(v===!0?i:utils.missing)}),new Variable(arr)},LogicalVar}})}("function"==typeof define&&define.amd?define:function(factory){"use strict";module.exports=factory(require)})},{"./../utils":10}],15:[function(require,module){!function(define){"use strict";define(function(){return function(Variable){function OrdinalVar(values,options){this.levels(options.levels||values.slice().sort()),this.values=new Variable.Vector(this.getCodes(values)).mutable(!0)}return OrdinalVar.prototype=Object.create(Variable.FactorVar.prototype),OrdinalVar}})}("function"==typeof define&&define.amd?define:function(factory){"use strict";module.exports=factory(require)})},{}],16:[function(require,module){!function(define){"use strict";define(function(){return function(Variable){function ScalarVar(values){this.values=new Variable.Vector(values).mutable(!0)}return ScalarVar.prototype=Object.create(Variable.prototype),ScalarVar}})}("function"==typeof define&&define.amd?define:function(factory){"use strict";module.exports=factory(require)})},{}],17:[function(require,module){!function(define){"use strict";define(function(){return function(Variable){function StringVar(values){this.values=new Variable.Vector(values).mutable(!0)}return StringVar.prototype=Object.create(Variable.prototype),StringVar.prototype.asScalar=function(){return this.map(parseFloat,!0,"scalar")},StringVar}})}("function"==typeof define&&define.amd?define:function(factory){"use strict";module.exports=factory(require)})},{}],18:[function(require){window.Base=require("./index.js")},{"./index.js":19}],19:[function(require,module){!function(define){"use strict";define(function(require){var Base,loader;return Base={},loader=new(require("panthrLoader"))(Base),loader.loadModule(require("./panthrBase")),Base})}("function"==typeof define&&define.amd?define:function(factory){"use strict";module.exports=factory(require)})},{"./panthrBase":53,panthrLoader:52}],20:[function(require,module){!function(define){"use strict";define(function(require){var LinAlg;return LinAlg={},LinAlg.Vector=require("./linAlg/vector"),LinAlg.Matrix=require("./linAlg/matrix"),LinAlg})}("function"==typeof define&&define.amd?define:function(factory){"use strict";module.exports=factory(require)})},{"./linAlg/matrix":21,"./linAlg/vector":45}],21:[function(require,module){!function(define){"use strict";define(function(require){function Matrix(arr,options){return arr instanceof Matrix?arr:new Matrix.DenseM(arr,options)}var op;return op=require("./utils").op,Matrix.Vector=require("./vector"),Matrix.DenseM=require("./matrix/dense")(Matrix),Matrix.SparseM=Matrix.DenseM.SparseM,Matrix.TabularM=Matrix.DenseM.TabularM,Matrix.StructuredM=require("./matrix/structured")(Matrix),Matrix.LowerTriM=Matrix.StructuredM.LowerTriM,Matrix.UpperTriM=Matrix.StructuredM.UpperTriM,Matrix.SymmetricM=Matrix.StructuredM.SymmetricM,Matrix.OuterM=Matrix.StructuredM.OuterM,Matrix.SumM=Matrix.StructuredM.SumM,Matrix.ProdM=Matrix.StructuredM.ProdM,Matrix.DiagM=Matrix.StructuredM.DiagM,Matrix.CDiagM=Matrix.StructuredM.CDiagM,Matrix.PermM=Matrix.StructuredM.PermM,Matrix.ViewM=require("./matrix/view")(Matrix),Matrix.ViewMV=require("./matrix/viewmv")(Matrix),Matrix.Solver=require("./solver")(Matrix),Matrix.diag=function(diagonal,len){return new Matrix.DiagM(diagonal,len)},Matrix.const=function(val,nrow){return new Matrix.CDiagM(val,nrow)},Matrix.perm=function perm(perm,nrow){return new Matrix.PermM(perm,nrow)},Matrix.rowBind=function(matrices){var ncol;if(matrices=[].concat.apply([],[].map.call(arguments,function(m){return m instanceof Matrix?m.toArray(!0):[m.toArray()]})),ncol=matrices[0].length,!matrices.every(function(m){return m.length===ncol}))throw new Error("Trying to rowBind rows of unequal length.");return new Matrix(matrices,!0)},Matrix.prototype.rowBind=function(matrices){return matrices=Array.prototype.slice.call(arguments),matrices.unshift(this),Matrix.rowBind.apply(null,matrices)},Matrix.Vector.rowBind=Matrix.rowBind,Matrix.Vector.prototype.rowBind=Matrix.prototype.rowBind,Matrix.colBind=function(matrices){var nrow;if(matrices=[].concat.apply([],[].map.call(arguments,function(m){return m instanceof Matrix?m.toArray():[m.toArray()]})),nrow=matrices[0].length,!matrices.every(function(m){return m.length===nrow}))throw new Error("Trying to colBind columns of unequal length.");return new Matrix(matrices,!1)},Matrix.prototype.colBind=function(matrices){return matrices=Array.prototype.slice.call(arguments),matrices.unshift(this),Matrix.colBind.apply(null,matrices)},Matrix.Vector.colBind=Matrix.colBind,Matrix.Vector.prototype.colBind=Matrix.prototype.colBind,Matrix.prototype.classes=[Matrix],Matrix.prototype.isA=function(constr){return this.classes.reduce(function(acc,con2){return acc||constr===con2},!1)},Matrix.commonConstr=function(A,B){var i;for(i=0;i<A.classes.length;i+=1)if(B.isA(A.classes[i]))return A.classes[i];throw new Error("Matrix is not a common ancestor for these BAD guys.")},Matrix.prototype.get=function(i,j){return arguments.length<=1?this.toArray(i||!1):this._get(i,j)},Matrix.prototype._get=function(i,j){return this.validIndices(i,j)?this.validate(i,j)?this.compute(i,j):0:null},Matrix.prototype.compute=function(i,j){return this.values.get(this.toIndex(i,j))},Matrix.prototype.set=function(i,j,val){function changeAll(target,vals){function makeLookup(vals){return"function"==typeof vals?vals:vals instanceof Matrix?(Matrix.ensureSameDims(target,vals),vals.get.bind(vals)):function(){return vals}}vals=makeLookup(vals),target.each(function(val,i,j){target._set(i,j,vals(i,j))})}return 1===arguments.length?changeAll(this,i):this._set(i,j,val),this},Matrix.prototype._set=function(i,j,val){if(!this.validate(i,j,val)||!this.validIndices(i,j))throw new Error("Setting out of Matrix bounds");return this.change(i,j,val)},Matrix.prototype.change=function(i,j,val){return this.values._set(this.toIndex(i,j),val),this},Matrix.prototype.validate=function(){return!0},Matrix.prototype.toArray=function(byRow){var arr=[];return byRow?this.eachRow(function(row){arr.push(row.toArray())}):this.eachCol(function(col){arr.push(col.toArray())}),arr},Matrix.prototype.toVector=function(byRow){var obj;return byRow=byRow||!1,obj={nrow:this.nrow,ncol:this.ncol,byRow:byRow},new Matrix.Vector(function(n){return this.get(this.rowFromIndex.call(obj,n),this.colFromIndex.call(obj,n))}.bind(this),this.nrow*this.ncol)},Matrix.prototype.force=function(){return this},Matrix.prototype.constr=function(){return Matrix},Matrix.prototype.clone=function(faithful){return faithful===!1?this._clone():this._faithfulClone()},Matrix.prototype._clone=function(){return new Matrix(this.toArray())},Matrix.prototype._faithfulClone=function(){return this.map(function(x){return x}).force()},Matrix.prototype.solve=function(b){if(null==this._solver&&(this._solver=this.getSolver()),this._solver.isSingular())throw new Error("System not solvable");return this._solver.solve(b)},Matrix.prototype.getSolver=function(){return new Matrix.Solver(this)},Matrix.prototype.inverse=function(){return this.solve(Matrix.const(1,this))},Matrix.prototype.toIndex=function(i,j){return this.byRow?(i-1)*this.ncol+j:(j-1)*this.nrow+i},Matrix.prototype.rowFromIndex=function(n){return this.byRow?Math.floor((n-1)/this.ncol)+1:(n-1)%this.nrow+1},Matrix.prototype.colFromIndex=function(n){return this.byRow?(n-1)%this.ncol+1:Math.floor((n-1)/this.nrow)+1},Matrix.Vector.prototype.outer=function(v2,f){var tabf;return null==f?new Matrix.OuterM(this,v2):(f=null!=op[f]?op[f]:f,tabf=function(i,j){return f(this.get(i),v2.get(j),i,j)}.bind(this),new Matrix(tabf,{nrow:this.length,ncol:v2.length}))},Matrix.prototype.pAdd=function(other,k){return new Matrix.SumM(this,other,k)},Matrix.prototype.sMult=function(k){return this.map(function(val){return k*val})},Matrix.prototype.mult=function(other){return new Matrix.ProdM(this,other)},Matrix.Vector.prototype.mult=function(other){return new Matrix.ProdM(this,other)},Matrix.prototype.lvMult=function(vec){return new Matrix.Vector(function(j){return vec.dot(this.colView(j))}.bind(this),this.ncol)},Matrix.prototype.rvMult=function(vec){return new Matrix.Vector(function(i){return vec.dot(this.rowView(i))}.bind(this),this.nrow)},Matrix.prototype.view=function(rowIndex,colIndex,dims){return new Matrix.ViewM(this,rowIndex,colIndex,dims)},Matrix.prototype.rowView=function(i){return new Matrix.ViewMV(this,i,"row")},Matrix.prototype.colView=function(j){return new Matrix.ViewMV(this,j,"col")},Matrix.prototype.rows=function(){var res,i;for(res=[],i=1;i<=this.nrow;i+=1)res.push(this.rowView(i));return res},Matrix.prototype.cols=function(){var res,j;for(res=[],j=1;j<=this.ncol;j+=1)res.push(this.colView(j));return res},Matrix.prototype.diagView=function(offset){return new Matrix.ViewMV(this,offset||0,"diag")},Matrix.prototype.rowPermute=function(perm){return Matrix.perm(perm,this.nrow).mult(this)},Matrix.prototype.colPermute=function(perm){return this.mult(Matrix.perm(perm,this.ncol).transpose())},Matrix.prototype.mutable=function(newSetting){return null!=newSetting?(this.values.mutable(newSetting),this):this.values.mutable()},Matrix.prototype.each=function(f){var i,j;for(i=1;i<=this.nrow;i+=1)for(j=1;j<=this.ncol;j+=1)f(this.compute(i,j),i,j)},Matrix.prototype.forEach=function(f){return this.each(f)},Matrix.prototype.eachRow=function(f){var i;for(i=1;i<=this.nrow;i+=1)f(this.rowView(i),i);return this},Matrix.prototype.eachCol=function(f){var j;for(j=1;j<=this.ncol;j+=1)f(this.colView(j),j);return this},Matrix.prototype.reduce=function(f,initial){return this.each(function(val,i,j){initial=f(initial,val,i,j)}),initial},Matrix.prototype.reduceRow=function(f,initial){var i;for(i=1;i<=this.nrow;i+=1)initial=f(initial,this.rowView(i),i);return initial},Matrix.prototype.reduceCol=function(f,initial){var j;for(j=1;j<=this.ncol;j+=1)initial=f(initial,this.colView(j),j);return initial},Matrix.prototype.map=function(f){return new(this.constr())(function(i,j){return f(this.get(i,j),i,j)}.bind(this),this)},Matrix.prototype.mapRow=function(f){var newRows=[];return this.eachRow(function(row,i){newRows.push(f(row,i))}),newRows[0]instanceof Matrix.Vector?new Matrix(newRows.map(function(row){return row.toArray()}),!0):Array.isArray(newRows[0])?new Matrix(newRows,!0):new Matrix.Vector(newRows)},Matrix.prototype.mapCol=function(f){var newCols=[];return this.eachCol(function(col,j){newCols.push(f(col,j))}),newCols[0]instanceof Matrix.Vector?new Matrix(newCols.map(function(col){return col.toArray()})):Array.isArray(newCols[0])?new Matrix(newCols):new Matrix.Vector(newCols)},Matrix.prototype.eachPair=function(other,f){var i,j;for(Matrix.ensureSameDims(this,other),i=1;i<=this.nrow;i+=1)for(j=1;j<=this.ncol;j+=1)f(this.get(i,j),other.get(i,j),i,j)},Matrix.prototype.reducePair=function(other,f,initial){var i,j;for(Matrix.ensureSameDims(this,other),i=1;i<=this.nrow;i+=1)for(j=1;j<=this.ncol;j+=1)initial=f(initial,this.get(i,j),other.get(i,j),i,j);return initial},Matrix.prototype.mapPair=function(other,f){return Matrix.ensureSameDims(this,other),new Matrix(function(i,j){return f(this.get(i,j),other.get(i,j),i,j)}.bind(this),this)},Matrix.prototype.any=function(pred){var i,j;for(i=1;i<=this.nrow;i+=1)for(j=1;j<=this.ncol;j+=1)if(pred(this.get(i,j),i,j))return!0;return!1},Matrix.prototype.all=function(pred){var i,j;for(i=1;i<=this.nrow;i+=1)for(j=1;j<=this.ncol;j+=1)if(!pred(this.get(i,j),i,j))return!1;return!0},Matrix.prototype.transpose=function(){return new Matrix(function(i,j){return this.get(j,i)}.bind(this),{nrow:this.ncol,ncol:this.nrow})},Matrix.prototype.lower=function(){return new Matrix.LowerTriM(this)},Matrix.prototype.upper=function(){return new Matrix.UpperTriM(this)},Matrix.prototype.isSymmetric=function(){return this.equals(this.transpose())},Matrix.prototype.isLower=function(){return this.equals(this.lower())},Matrix.prototype.isUpper=function(){return this.equals(this.upper())},Matrix.prototype.equals=function(m2,tolerance){var i;if(!Matrix.sameDims(this,m2))return!1;for(i=1;i<=this.nrow;i+=1)if(!this.rowView(i).equals(m2.rowView(i),tolerance))return!1;return!0},Matrix.sameDims=function(A,B){return A.nrow===B.nrow&&A.ncol===B.ncol},Matrix.ensureSameDims=function(A,B){if(!Matrix.sameDims(A,B))throw new Error("Expected matrices of same dimensions.")},Matrix.compatibleDims=function(A,B){return A instanceof Matrix.Vector?A.length===B.nrow:B instanceof Matrix.Vector?A.ncol===B.length:A.ncol===B.nrow},Matrix.prototype.validIndices=function(i,j){return i>=1&&i<=this.nrow&&j>=1&&j<=this.ncol},Matrix})}("function"==typeof define&&define.amd?define:function(factory){"use strict";module.exports=factory(require)})},{"./matrix/dense":22,"./matrix/structured":25,"./matrix/view":35,"./matrix/viewmv":36,"./solver":38,"./utils":44,"./vector":45}],22:[function(require,module){!function(define){"use strict";define(function(require){return function(Matrix){function DenseM(arr,options){if(!Array.isArray(arr))return"function"==typeof arr?new DenseM.TabularM(arr,options):new DenseM.SparseM(arr,options);if(0===arr.length)throw new Error("Cannot create empty matrix yet.");if("boolean"==typeof options&&(options={byRow:options}),null==options&&(options={}),this.byRow=options.byRow===!0,Array.isArray(arr[0])&&(options[this.byRow?"nrow":"ncol"]=arr.length,arr=[].concat.apply([],arr)),this.values=new Matrix.Vector(arr),this.nrow=options.nrow||Math.floor(arr.length/options.ncol),this.ncol=options.ncol||Math.floor(arr.length/this.nrow),this.ncol*this.nrow!==this.values.length)throw new Error("Declared matrix dimensions invalid");return this}return DenseM.prototype=Object.create(Matrix.prototype),DenseM.SparseM=require("./dense/sparse")(Matrix,DenseM),DenseM.TabularM=require("./dense/tabular")(Matrix,DenseM),DenseM.prototype.each=function(f){var f2=function(val,n){return f(val,this.rowFromIndex(n),this.colFromIndex(n))}.bind(this);return this.values.each(f2,!0),this},DenseM}})}("function"==typeof define&&define.amd?define:function(factory){"use strict";module.exports=factory(require)})},{"./dense/sparse":23,"./dense/tabular":24}],23:[function(require,module){!function(define){"use strict";define(function(){return function(Matrix,DenseM){function SparseM(arr,options){var i,j,values={};this.byRow=!0,this.nrow=options&&options.nrow,this.ncol=options&&options.ncol;for(i in arr)if(arr.hasOwnProperty(i)&&!isNaN(parseInt(i)))for(j in arr[i])arr[i].hasOwnProperty(j)&&!isNaN(parseInt(j))&&(values[this.toIndex(parseInt(i),parseInt(j))]=arr[i][j]);this.values=new Matrix.Vector(values,this.nrow*this.ncol)}return SparseM.prototype=Object.create(DenseM.prototype),SparseM.add=function(A,B,k){function addValue(val,i,j){0!==val&&(null==res[i]&&(res[i]={}),res[i][j]=(res[i][j]||0)+val)}var res;return res={},A.forEach(addValue),B.forEach(function(val,i,j){addValue(k*val,i,j)}),new SparseM(res,A)},SparseM.mult=function(A,B){function addValue(val,i,j){0!==val&&(null==res[i]&&(res[i]={}),res[i][j]=(res[i][j]||0)+val)}var res;return res={},A.forEach(function(Aval,i,k){Object.keys(B.values[k]||{}).forEach(function(j){addValue(Aval*B.values[k][j],i,j)})}),new SparseM(res,{nrow:A.nrow,ncol:B.ncol})},SparseM.prototype.classes=[SparseM,Matrix],SparseM.prototype.map=function(f){var newValues={};return this.each(function(val,i,j){newValues[i]=newValues[i]||{},newValues[i][j]=f(val,i,j)},!0),new Matrix(newValues,{nrow:this.nrow,ncol:this.ncol})},SparseM.prototype.transpose=function(){var newValues={};return this.each(function(val,i,j){newValues[j]=newValues[j]||{},newValues[j][i]=val},!0),new Matrix(newValues,{nrow:this.ncol,ncol:this.nrow})},SparseM}})}("function"==typeof define&&define.amd?define:function(factory){"use strict";module.exports=factory(require)})},{}],24:[function(require,module){!function(define){"use strict";define(function(){return function(Matrix,DenseM){function TabularM(f,options){function f2(n){return f(this.rowFromIndex(n),this.colFromIndex(n))}this.byRow=!0,this.nrow=options&&options.nrow,this.ncol=options&&options.ncol,this.values=new Matrix.Vector(f2.bind(this),this.nrow*this.ncol)}return TabularM.prototype=Object.create(DenseM.prototype),TabularM.prototype.force=function(){return this.values.force(),this},TabularM}})}("function"==typeof define&&define.amd?define:function(factory){"use strict";module.exports=factory(require)})},{}],25:[function(require,module){!function(define){"use strict";define(function(require){return function(Matrix){function StructuredM(){throw new Error("Not meant to call StructuredM")}return StructuredM.prototype=Object.create(Matrix.DenseM.prototype),StructuredM.LowerTriM=require("./structured/lowerTri")(Matrix,StructuredM),StructuredM.UpperTriM=require("./structured/upperTri")(Matrix,StructuredM),StructuredM.SymmetricM=require("./structured/symmetric")(Matrix,StructuredM),StructuredM.OuterM=require("./structured/outer")(Matrix,StructuredM),StructuredM.SumM=require("./structured/sum")(Matrix,StructuredM),StructuredM.ProdM=require("./structured/prod")(Matrix,StructuredM),StructuredM.DiagM=require("./structured/diag")(Matrix,StructuredM),StructuredM.CDiagM=require("./structured/cDiag")(Matrix,StructuredM),StructuredM.PermM=require("./structured/perm")(Matrix,StructuredM),StructuredM}})}("function"==typeof define&&define.amd?define:function(factory){"use strict";module.exports=factory(require)})},{"./structured/cDiag":26,"./structured/diag":27,"./structured/lowerTri":28,"./structured/outer":29,"./structured/perm":30,"./structured/prod":31,"./structured/sum":32,"./structured/symmetric":33,"./structured/upperTri":34}],26:[function(require,module){!function(define){"use strict";define(function(){return function(Matrix,StructuredM){function CDiagM(val,nrow){if(nrow=nrow&&nrow.nrow||nrow,null==nrow)throw new Error("Must specify matrix dimensions");this.val=val,this.byRow=!1,this.nrow=nrow,this.ncol=nrow}return CDiagM.prototype=Object.create(StructuredM.DiagM.prototype),CDiagM.add=function(A,B,k){return new CDiagM(A.val+k*B.val,A)},CDiagM.prototype.classes=[CDiagM,StructuredM.DiagM,StructuredM.LowerTriM,StructuredM.UpperTriM,StructuredM.SymmetricM,Matrix],CDiagM.prototype.mutable=function(newSetting){if(null==newSetting)return!1;throw new Error("Cannot set constant to be mutable")},CDiagM.prototype.change=function(){throw new Error("Trying to set entry in constant matrix")},CDiagM.prototype.compute=function(i,j){return i===j?this.val:0},CDiagM.prototype.constr=function(){return StructuredM.DiagM},CDiagM.prototype.each=function(f){var i;for(i=1;i<=this.nrow;i+=1)f(this.val,i,i);return this},CDiagM.prototype.inverse=function(){if(0===this.val)throw new Error("Cannot invert zero matrix.");return new CDiagM(1/this.val,this)},CDiagM.prototype.sMult=function(k){return new CDiagM(k*this.val,this)},CDiagM}})}("function"==typeof define&&define.amd?define:function(factory){"use strict";module.exports=factory(require)})},{}],27:[function(require,module){!function(define){"use strict";define(function(){return function(Matrix,StructuredM){function DiagM(diagonal,nrow){diagonal instanceof Matrix.Vector||("function"==typeof diagonal&&(diagonal=function(i){return this(i,i)}.bind(diagonal)),diagonal=new Matrix.Vector(diagonal,nrow&&nrow.nrow||nrow)),this.byRow=!1,this.values=diagonal,this.nrow=this.values.length,this.ncol=this.values.length}return DiagM.prototype=Object.create(StructuredM.prototype),DiagM.prototype.classes=[DiagM,StructuredM.LowerTriM,StructuredM.UpperTriM,StructuredM.SymmetricM,Matrix],DiagM.prototype.validate=function(i,j,val){if(i===j)return!0;if(arguments.length>2&&0!==val)throw new Error("Trying to set non-diagonal entry in diagonal matrix");return!1},DiagM.prototype.toIndex=function(i){return i},DiagM.prototype.rowFromIndex=function(n){return n},DiagM.prototype.colFromIndex=function(n){return n},DiagM.prototype.constr=function(){return DiagM},DiagM.prototype.transpose=function(){return this},DiagM.prototype.isSymmetric=DiagM.prototype.isLower=DiagM.prototype.isUpper=function(){return!0},DiagM.prototype.inverse=function(){return Matrix.diag(Matrix.prototype.inverse.call(this).diagView())},DiagM.prototype.lMult=function(B){return B.map(function(val,i,j){return val*this.get(j,j)}.bind(this))},DiagM.prototype.rMult=function(B){return B.map(function(val,i){return val*this.get(i,i)}.bind(this))},DiagM}})}("function"==typeof define&&define.amd?define:function(factory){"use strict";module.exports=factory(require)})},{}],28:[function(require,module){!function(define){"use strict";define(function(){return function(Matrix,StructuredM){function LowerTriM(values,nrow){var getValue;return values instanceof LowerTriM?values:(this.byRow=!0,this.nrow=nrow&&nrow.nrow||nrow,values instanceof Matrix?(this.nrow=Math.min(values.nrow,values.ncol),getValue=values._get.bind(values)):getValue="function"==typeof values?values:function(){return values},this.ncol=this.nrow,void(this.values=new Matrix.Vector(function(n){return getValue(this.rowFromIndex(n),this.colFromIndex(n))}.bind(this),this.toIndex(this.nrow,this.ncol))))}return LowerTriM.prototype=Object.create(StructuredM.prototype),LowerTriM.prototype.classes=[LowerTriM,Matrix],LowerTriM.prototype.toIndex=function(i,j){return i*(i-1)/2+j},LowerTriM.prototype.rowFromIndex=function(n){return Math.floor((1+Math.sqrt(1+8*(n-1)))/2)},LowerTriM.prototype.colFromIndex=function(n){var i=Math.floor((1+Math.sqrt(1+8*(n-1)))/2);return n-i*(i-1)/2},LowerTriM.prototype.validate=function(i,j,val){if(i>=j)return!0;if(arguments.length>2&&0!==val)throw new Error("Trying to set upper entry in Lower triangular matrix");return!1},LowerTriM.prototype.constr=function(){return LowerTriM},LowerTriM.prototype.transpose=function(){return new StructuredM.UpperTriM(function(i,j){return this.get(j,i)}.bind(this),{nrow:this.ncol,ncol:this.nrow})},LowerTriM.prototype.inverse=function(){return Matrix.prototype.inverse.call(this).lower()},LowerTriM.prototype.isLower=function(){return!0},LowerTriM}})}("function"==typeof define&&define.amd?define:function(factory){"use strict";module.exports=factory(require)})},{}],29:[function(require,module){!function(define){"use strict";define(function(){return function(Matrix,StructuredM){function OuterM(v1,v2){this.v1=new Matrix.Vector(v1),this.v2=new Matrix.Vector(v2),this.byRow=!1,this.nrow=this.v1.length,this.ncol=this.v2.length}return OuterM.prototype=Object.create(StructuredM.prototype),OuterM.prototype.classes=[OuterM,Matrix],OuterM.prototype.mutable=function(newSetting){if(null==newSetting)return!1;throw new Error("Cannot set outer product matrix to be mutable")},OuterM.prototype.change=function(){throw new Error("Trying to set entry in outer product matrix")},OuterM.prototype.compute=function(i,j){return this.v1.get(i)*this.v2.get(j)},OuterM.prototype.constr=function(){return Matrix},OuterM.prototype.lvMult=function(v){return this.v2.sMult(v.dot(this.v1))},OuterM.prototype.rvMult=function(v){return this.v1.sMult(v.dot(this.v2))},OuterM.prototype.lMult=function(m){return new OuterM(m.mult(this.v1),this.v2)},OuterM.prototype.rMult=function(m){return new OuterM(this.v1,this.v2.mult(m))},OuterM.prototype.sMult=function(k){return new OuterM(this.v1.sMult(k),this.v2)},OuterM.prototype.transpose=function(){return new OuterM(this.v2,this.v1)},OuterM}})}("function"==typeof define&&define.amd?define:function(factory){"use strict";
module.exports=factory(require)})},{}],30:[function(require,module){!function(define){"use strict";define(function(require){var Permutation=require("./../../permutation.js");return function(Matrix,StructuredM){function PermM(perm,nrow){this.perm=new Permutation(perm),this.invPerm=this.perm.inverse(),this.nrow=nrow&&nrow.nrow||nrow,this.ncol=this.nrow,this.byRow=!1}function ident(i){return i}function sparsify(m){var obj,i;for(obj={},i=1;i<=m.nrow;i+=1)obj[m.perm.get(i)]={},obj[m.perm.get(i)][i]=1;return new Matrix.SparseM(obj,m)}return PermM.mult=function(A,B){return new PermM(B.perm.compose(A.perm),A)},PermM.prototype=Object.create(StructuredM.prototype),PermM.prototype.classes=[PermM,StructuredM,Matrix],PermM.prototype.mutable=function(newSetting){if(null==newSetting)return!1;throw new Error("Cannot set permutation matrix to be mutable")},PermM.prototype.change=function(){throw new Error("Trying to set entry in permutation matrix")},PermM.prototype.compute=function(i,j){return i===this.perm.get(j)?1:0},PermM.prototype.constr=function(){return Matrix},PermM.prototype.lvMult=function(v){return v.permute(this.invPerm)},PermM.prototype.rvMult=function(v){return v.permute(this.perm)},PermM.prototype.lMult=function(m){return m.isA(PermM)?PermM.mult(m,this):m.view(ident,this.perm.get.bind(this.perm),m)},PermM.prototype.rMult=function(m){return m.isA(PermM)?PermM.mult(this,m):m.view(this.invPerm.get.bind(this.invPerm),ident,m)},PermM.prototype.sMult=function(k){return sparsify(this).sMult(k)},PermM.prototype.map=function(f){return sparsify(this).map(f)},PermM.prototype.each=function(f){return sparsify(this).each(f),this},PermM.prototype.inverse=PermM.prototype.transpose=function(){return new PermM(this.invPerm,this)},PermM}})}("function"==typeof define&&define.amd?define:function(factory){"use strict";module.exports=factory(require)})},{"./../../permutation.js":37}],31:[function(require,module){!function(define){"use strict";define(function(){return function(Matrix,StructuredM){function ProdM(A,B){if(!Matrix.compatibleDims(A,B))throw new Error("Cannot multiply matrices/vectors with incompatible dimensions.");return computeProd(A,B)}function computeProd(A,B){var Constr,rowsA,colsB;return A instanceof Matrix.Vector?B.lvMult(A):B instanceof Matrix.Vector?A.rvMult(B):A.isA(Matrix.PermM)?A.rMult(B):B.isA(Matrix.PermM)?B.lMult(A):A.isA(Matrix.SparseM)&&B.isA(Matrix.SparseM)?Matrix.SparseM.mult(A,B):A.isA(Matrix.CDiagM)?B.sMult(A.val):B.isA(Matrix.CDiagM)?A.sMult(B.val):A.isA(Matrix.DiagM)||A.isA(Matrix.OuterM)?A.rMult(B):B.isA(Matrix.DiagM)||B.isA(Matrix.OuterM)?B.lMult(A):A.isA(Matrix.UpperTriM)&&B.isA(Matrix.LowerTriM)?Matrix.diag(function(i){return A.rowView(i).dot(B.colView(i))},A):(Constr=Matrix.commonConstr(A,B),Constr===Matrix.SymmetricM&&(Constr=Matrix),rowsA=A.rows(),colsB=B.cols(),new Constr(function(i,j){return rowsA[i-1].dot(colsB[j-1])},{nrow:A.nrow,ncol:B.ncol}))}return ProdM.prototype=Object.create(StructuredM.prototype),ProdM}})}("function"==typeof define&&define.amd?define:function(factory){"use strict";module.exports=factory(require)})},{}],32:[function(require,module){!function(define){"use strict";define(function(){return function(Matrix,StructuredM){function SumM(A,B,k){return null==k&&(k=1),Matrix.ensureSameDims(A,B),computeSum(A,B,k)}function computeSum(A,B,k){return A.isA(Matrix.SparseM)&&B.isA(Matrix.SparseM)?Matrix.SparseM.add(A,B,k):A.isA(Matrix.CDiagM)&&B.isA(Matrix.CDiagM)?Matrix.CDiagM.add(A,B,k):new(Matrix.commonConstr(A,B))(function(i,j){return A.get(i,j)+k*B.get(i,j)},A)}return SumM.prototype=Object.create(StructuredM.prototype),SumM}})}("function"==typeof define&&define.amd?define:function(factory){"use strict";module.exports=factory(require)})},{}],33:[function(require,module){!function(define){"use strict";define(function(){return function(Matrix,StructuredM){function SymmetricM(values,nrow){var getValue;return values instanceof SymmetricM?values:(this.byRow=!0,this.nrow=nrow&&nrow.nrow||nrow,values instanceof Matrix?(this.nrow=Math.min(values.nrow,values.ncol),getValue=values._get.bind(values)):getValue="function"==typeof values?values:function(){return values},this.ncol=this.nrow,void(this.values=new Matrix.Vector(function(n){return getValue(this.rowFromIndex(n),this.colFromIndex(n))}.bind(this),this.toIndex(this.nrow,this.ncol))))}return SymmetricM.prototype=Object.create(StructuredM.prototype),SymmetricM.prototype.classes=[SymmetricM,Matrix],SymmetricM.prototype.toIndex=function(i,j){return j>i?j*(j-1)/2+i:i*(i-1)/2+j},SymmetricM.prototype.rowFromIndex=function(n){return Math.floor((1+Math.sqrt(1+8*(n-1)))/2)},SymmetricM.prototype.colFromIndex=function(n){var i=Math.floor((1+Math.sqrt(1+8*(n-1)))/2);return n-i*(i-1)/2},SymmetricM.prototype.constr=function(){return Matrix},SymmetricM.prototype.transpose=function(){return this},SymmetricM.prototype.isSymmetric=function(){return!0},SymmetricM.prototype.inverse=function(){return new SymmetricM(Matrix.prototype.inverse.call(this))},SymmetricM.prototype.sMult=function(k){return new SymmetricM(function(i,j){return k*this.get(i,j)}.bind(this),this)},SymmetricM}})}("function"==typeof define&&define.amd?define:function(factory){"use strict";module.exports=factory(require)})},{}],34:[function(require,module){!function(define){"use strict";define(function(){return function(Matrix,StructuredM){function UpperTriM(values,ncol){var getValue;return values instanceof UpperTriM?values:(this.byRow=!1,this.nrow=ncol&&ncol.ncol||ncol,values instanceof Matrix?(this.nrow=Math.min(values.nrow,values.ncol),getValue=values._get.bind(values)):getValue="function"==typeof values?values:function(){return values},this.ncol=this.nrow,void(this.values=new Matrix.Vector(function(n){return getValue(this.rowFromIndex(n),this.colFromIndex(n))}.bind(this),this.toIndex(this.nrow,this.ncol))))}return UpperTriM.prototype=Object.create(StructuredM.prototype),UpperTriM.prototype.classes=[UpperTriM,Matrix],UpperTriM.prototype.toIndex=function(i,j){return j*(j-1)/2+i},UpperTriM.prototype.rowFromIndex=function(n){var j=Math.floor((1+Math.sqrt(1+8*(n-1)))/2);return n-j*(j-1)/2},UpperTriM.prototype.colFromIndex=function(n){return Math.floor((1+Math.sqrt(1+8*(n-1)))/2)},UpperTriM.prototype.constr=function(){return UpperTriM},UpperTriM.prototype.validate=function(i,j,val){if(j>=i)return!0;if(arguments.length>2&&0!==val)throw new Error("Trying to set lower entry in Upper triangular matrix");return!1},UpperTriM.prototype.transpose=function(){return new StructuredM.LowerTriM(function(i,j){return this.get(j,i)}.bind(this),{nrow:this.ncol,ncol:this.nrow})},UpperTriM.prototype.inverse=function(){return Matrix.prototype.inverse.call(this).upper()},UpperTriM.prototype.isUpper=function(){return!0},UpperTriM}})}("function"==typeof define&&define.amd?define:function(factory){"use strict";module.exports=factory(require)})},{}],35:[function(require,module){!function(define){"use strict";define(function(){return function(Matrix){function ViewM(target,rowIndex,colIndex,dims){function lookup(indices){return"function"==typeof indices?indices:Array.isArray(indices)?function(i){return indices[i-1]}:function(){return indices}}return this.target=target,this.i=lookup(rowIndex),this.j=lookup(colIndex),this.nrow=Array.isArray(rowIndex)?rowIndex.length:dims.nrow,this.ncol=Array.isArray(colIndex)?colIndex.length:dims.ncol,this.byRow=!1,this}return ViewM.prototype=Object.create(Matrix.prototype),ViewM.prototype.compute=function(i,j){return this.target._get(this.i(i),this.j(j))},ViewM.prototype.change=function(i,j,val){return this.target._set(this.i(i),this.j(j),val),this},ViewM.prototype.mutable=function(newSetting){return null!=newSetting?(this.target.mutable(newSetting),this):this.target.mutable()},ViewM}})}("function"==typeof define&&define.amd?define:function(factory){"use strict";module.exports=factory(require)})},{}],36:[function(require,module){!function(define){"use strict";define(function(){return function(Matrix){function ViewMV(target,index,direction){var jEnd;if(null==direction)throw new Error("`direction` is a required argument");if(this.direction=direction,this.target=target,this.index=index,"row"===this.direction){if(1>index||index>target.nrow)throw new Error("Row index out of bounds");this.length=target.ncol}else if("col"===this.direction){if(1>index||index>target.ncol)throw new Error("Column index out of bounds");this.length=target.nrow}else if(this.iOffset=Math.max(-index,0),this.jOffset=Math.max(index,0),jEnd=Math.min(target.ncol,target.nrow+index),this.length=jEnd-this.jOffset,this.length<=0)throw new Error("Diagonal offset out of bounds");return this}return ViewMV.prototype=Object.create(Matrix.Vector.ViewV.prototype),ViewMV.prototype.compute=function(i){return"row"===this.direction?this.target._get(this.index,i):"col"===this.direction?this.target._get(i,this.index):this.target._get(i+this.iOffset,i+this.jOffset)},ViewMV.prototype.change=function(i,val){return"row"===this.direction?this.target._set(this.index,i,val):"col"===this.direction?this.target._set(i,this.index,val):this.target._set(i+this.iOffset,i+this.jOffset,val),this},ViewMV}})}("function"==typeof define&&define.amd?define:function(factory){"use strict";module.exports=factory(require)})},{}],37:[function(require,module){!function(define){"use strict";define(function(){function Permutation(relation){return relation instanceof Permutation?relation:!this instanceof Permutation?new Permutation(relation):void(this.nonfixed=Permutation.cycleToObject(relation||{}))}function convert(cycle){var result,i;for(result={},i=0;i<cycle.length;i+=1)result[cycle[i]]=cycle[(i+1)%cycle.length];return result}function _compose(first,second){var keys,result;return result={},keys=Object.keys(first).concat(Object.keys(second)),keys.forEach(function(key){var value;key=parseInt(key),value=first[key]||key,value=second[value]||value,value!==key&&(result[key]=value)}),result}return Permutation.prototype=Object.create({}),Permutation.prototype.get=function(i){if(1>i)throw new Error("Permutations require positive arguments.");return this.nonfixed[i]||i},Permutation.prototype.compose=function(other){return other=other instanceof Permutation?other.nonfixed:Permutation.cycleToObject(other),new Permutation(_compose(this.nonfixed,other))},Permutation.prototype.inverse=function(){var newNonfixed,oldNonfixed;return oldNonfixed=this.nonfixed,newNonfixed={},Object.keys(oldNonfixed).forEach(function(key){newNonfixed[oldNonfixed[key]]=parseInt(key)}),new Permutation(newNonfixed)},Permutation.prototype.toCycles=function(){var cycles,cycle,visited,start,key,relation;cycles=[],visited={},relation=this.nonfixed;for(key in relation)if(relation.hasOwnProperty(key)&&!visited[key]){for(start=parseInt(key),cycle=[start],visited[key]=!0;relation[key]!==start;)key=relation[key],visited[key]=!0,cycle.push(key);cycles.push(cycle)}return cycles},Permutation.cycleToObject=function(cycles){var result;return Array.isArray(cycles)?(cycles=Array.isArray(cycles[0])?cycles:[cycles],result={},cycles.forEach(function(cycle){result=_compose(result,convert(cycle))}),result):cycles},Permutation})}("function"==typeof define&&define.amd?define:function(factory){"use strict";module.exports=factory(require)})},{}],38:[function(require,module){!function(define){"use strict";define(function(require){return function(Matrix){function Solver(A){var ret;return A.isUpper()?A.isLower()?new Solver.DiagS(A.diagView()):new Solver.UpperS(A):A.isLower()?new Solver.LowerS(A):A.isSymmetric()&&(ret=new Solver.CholeskyS(A),!ret.isSingular())?ret:new Solver.PLUS(A)}var Vector;return Vector=Matrix.Vector,Solver.Matrix=Matrix,Solver.prototype=Object.create({}),Solver.DiagS=require("./solver/diag")(Solver),Solver.LowerS=require("./solver/lower")(Solver),Solver.UpperS=require("./solver/upper")(Solver),Solver.PLUS=require("./solver/plu")(Solver),Solver.CholeskyS=require("./solver/cholesky")(Solver),Solver.prototype.solve=function(b){return this.ensureCompatibleDims(b),b instanceof Vector?this._solve(b):new Matrix(b.mapCol(this._solve.bind(this)))},Solver.prototype.isSingular=function(){return!1},Solver.prototype.ensureCompatibleDims=function(b){if(this.nrow!==(b instanceof Vector?b.length:b.nrow))throw new Error("Solver and RHS have incompatible dimensions.")},Solver}})}("function"==typeof define&&define.amd?define:function(factory){"use strict";module.exports=factory(require)})},{"./solver/cholesky":39,"./solver/diag":40,"./solver/lower":41,"./solver/plu":42,"./solver/upper":43}],39:[function(require,module){!function(define){"use strict";define(function(){return function(Solver){function CholeskyS(A){this.A=A,computeCholesky.call(this),this.nrow=A.nrow}function computeCholesky(){var G,i,j,k,val;for(G=this.A.lower().mutable(!0),j=1;j<=G.ncol;j+=1){for(k=1;j>k;k+=1)for(i=j;i<=G.nrow;i+=1)G.set(i,j,G.get(i,j)-G.get(j,k)*G.get(i,k));for(val=Math.sqrt(G.get(j,j)),i=j;i<=G.nrow;i+=1)G.set(i,j,G.get(i,j)/val)}this.G=new Solver.LowerS(G),this.GT=new Solver.UpperS(G.transpose())}return CholeskyS.prototype=Object.create(Solver.prototype),CholeskyS.prototype._solve=function(b){return this.GT.solve(this.G.solve(b))},CholeskyS.prototype.isSingular=function(){return this.G.isSingular()},CholeskyS}})}("function"==typeof define&&define.amd?define:function(factory){"use strict";module.exports=factory(require)})},{}],40:[function(require,module){!function(define){"use strict";define(function(){return function(Solver){function DiagS(diag){this.diag=new Vector(diag),this.nrow=this.diag.length}var Vector,Matrix;return Matrix=Solver.Matrix,Vector=Matrix.Vector,DiagS.prototype=Object.create(Solver.prototype),DiagS.prototype._solve=function(b){return b.pDiv(this.diag)},DiagS.prototype.isSingular=function(){return this.diag.any(function(x){return 0===x})},DiagS}})}("function"==typeof define&&define.amd?define:function(factory){"use strict";module.exports=factory(require)})},{}],41:[function(require,module){!function(define){"use strict";define(function(require){return function(Solver){function LowerS(A){this.A=new Matrix.LowerTriM(A),this.nrow=this.A.nrow}var Vector,Matrix,utils;return utils=require("./../utils"),Matrix=Solver.Matrix,Vector=Matrix.Vector,LowerS.prototype=Object.create(Solver.prototype),LowerS.prototype._solve=function(b){var x,i,j,v;for(x=[],i=1;i<=this.nrow;i+=1){for(v=b.get(i),j=1;i>j;j+=1)v-=this.A.get(i,j)*x[j-1];x.push(v/this.A.get(i,i))}return new Vector(x)},LowerS.prototype.isSingular=function(){return this.A.diagView().any(function(x){return isNaN(x)||utils.veryClose(x,0,Vector.tolerance)})},LowerS}})}("function"==typeof define&&define.amd?define:function(factory){"use strict";module.exports=factory(require)})},{"./../utils":44}],42:[function(require,module){!function(define){"use strict";define(function(require){return function(Solver){function PLUS(A,strategy){this.A=A,this.strategy=strategy||"partial",computePLU.call(this),this.nrow=A.nrow}function computePLU(){function getPivot(A,k){var max,maxRow,r;for(max=-1/0,r=k;r<=A.nrow;r+=1)Math.abs(A.get(r,k))>max&&(max=Math.abs(A.get(r,k)),maxRow=r);return maxRow}function lowerLookup(i,j){return i===j?1:A.get(i,j)}var A,origA,i,j,k,pivot;for(A=origA=this.A.clone(!1).mutable(!0),this.P=Matrix.perm({},A.nrow),k=1;k<=A.ncol;k+=1)if(pivot=getPivot(A,k),!utils.veryClose(A.get(pivot,k),0,Matrix.Vector.tolerance))for(pivot!==k&&(this.P=Matrix.perm([pivot,k],A.nrow).mult(this.P),A=this.P.mult(origA)),i=k+1;i<=A.nrow;i+=1)for(A.set(i,k,A.get(i,k)/A.get(k,k)),j=k+1;j<=A.ncol;j+=1)A.set(i,j,A.get(i,j)-A.get(i,k)*A.get(k,j));this.U=new Solver.UpperS(A.mutable(!1).upper()),this.L=new Solver.LowerS(new Matrix.LowerTriM(lowerLookup,A.nrow))}var Matrix,utils;return utils=require("./../utils"),Matrix=Solver.Matrix,PLUS.prototype=Object.create(Solver.prototype),PLUS.prototype._solve=function(b){return this.U.solve(this.L.solve(this.P.mult(b)))},PLUS.prototype.isSingular=function(){return this.U.isSingular()},PLUS}})}("function"==typeof define&&define.amd?define:function(factory){"use strict";module.exports=factory(require)})},{"./../utils":44}],43:[function(require,module){!function(define){"use strict";define(function(require){return function(Solver){function UpperS(A){this.A=new Matrix.UpperTriM(A),this.nrow=this.A.nrow}var Vector,Matrix,utils;return utils=require("./../utils"),Matrix=Solver.Matrix,Vector=Matrix.Vector,UpperS.prototype=Object.create(Solver.prototype),UpperS.prototype._solve=function(b){var x,i,j,v;for(x=[],i=this.nrow;i>=1;i-=1){for(v=b.get(i),j=this.nrow;j>i;j-=1)v-=this.A.get(i,j)*x[j-1];x[i-1]=v/this.A.get(i,i)}return new Vector(x)},UpperS.prototype.isSingular=function(){return this.A.diagView().any(function(x){return isNaN(x)||utils.veryClose(x,0,Vector.tolerance)})},UpperS}})}("function"==typeof define&&define.amd?define:function(factory){"use strict";module.exports=factory(require)})},{"./../utils":44}],44:[function(require,module){!function(define){"use strict";define(function(){var utils={};return utils.veryClose=function(a,b,tol){return Math.abs(a-b)<tol},utils.op={},utils.op.add=function(a,b){return a+b},utils.op["+"]=utils.op.add,utils.op.sub=function(a,b){return a-b},utils.op["-"]=utils.op.sub,utils.op.mult=function(a,b){return a*b},utils.op["*"]=utils.op.mult,utils.op.div=function(a,b){return a/b},utils.op["/"]=utils.op.div,utils})}("function"==typeof define&&define.amd?define:function(factory){"use strict";module.exports=factory(require)})},{}],45:[function(require,module){!function(define){"use strict";define(function(require){function Vector(arr,len){return arr instanceof Vector?arr:Array.isArray(arr)?new Vector.DenseV(arr):"function"==typeof arr?new Vector.TabularV(arr,len):"number"==typeof arr?new Vector.TabularV(function(){return arr},len):new Vector.SparseV(arr,len)}function swap(f){return function(b,a,i){return f(a,b,i)}}var utils,op,Permutation;return Permutation=require("./permutation.js"),utils=require("./utils"),op=utils.op,Vector.tolerance=1e-8,Vector.DenseV=require("./vector/dense")(Vector),Vector.SparseV=require("./vector/sparse")(Vector),Vector.TabularV=require("./vector/tabular")(Vector),Vector.ConstV=require("./vector/const")(Vector),Vector.ViewV=require("./vector/view")(Vector),Vector.seq=function(a,b,step){var length;return 0===arguments.length?new Vector([]):(1===arguments.length&&(b=a,a=1,step=1,length=b),b===a?new Vector([a]):(step=step||(b>a?1:-1),length=Math.floor((b-a)/step)+1,new Vector(function(i){return a+(i-1)*step},length)))},Vector.const=function(val,len){return new Vector.ConstV(val,len)},Vector.ones=function(len){return Vector.const(1,len)},Vector.concat=function(vectors){return vectors=Array.prototype.concat.apply([],Array.prototype.map.call(arguments,function(vector){return vector instanceof Vector?vector.get():Array.isArray(vector)?vector:[vector]})),new Vector(vectors)},Vector.prototype.get=function(i){return null==i?this.toArray():(i instanceof Vector&&(i=i.get()),Array.isArray(i)?this.view(i).toArray():this._get(i))},Vector.prototype._get=function(i){return 1>i||i>this.length?null:(this.values||(this.values=[]),this.cached||null!=this.values[i-1]||(this.values[i-1]=this.compute(i)),this.values[i-1])},Vector.prototype.compute=function(){throw new Error("Subclasses of Vector need to implement compute: "+this.constructor.name)},Vector.prototype.set=function(i,vals){function changeAll(target,vals){function makeLookup(vals){if("function"==typeof vals)return vals;if(Array.isArray(vals)&&(vals=new Vector(vals)),vals instanceof Vector){if(!target.sameLength(vals))throw new Error("Incompatible vector lengths");return vals.get.bind(vals)}return function(){return vals}}var ind;for(vals=makeLookup(vals),ind=1;ind<=target.length;ind+=1)target._set(ind,vals(ind))}return 1===arguments.length?changeAll(this,i):Array.isArray(i)?changeAll(this.view(i),vals):this._set(i,vals),this},Vector.prototype._set=function(i,val){if(!this.mutable())throw new Error("Trying to set in an immutable vector.");if(1>i||i>this.length)throw new Error("Trying to set value out of bounds");return this.change(i,val),this},Vector.prototype.change=function(){throw new Error("Subclasses of Vector need to implement change: "+this.constructor.name)},Vector.prototype.mutable=function(isMutable){return this.hasOwnProperty("_mutable")||(this._mutable=!1),null!=isMutable?(this._mutable=isMutable===!0,this):this._mutable},Vector.prototype.force=function(){return this},Vector.prototype.view=function(arr,len){return new Vector.ViewV(this,arr,len)},Vector.prototype.fill=function(val,start,end){var i;if(start&&null!=start.forEach)start.forEach(function(ind){this._set(ind,val)}.bind(this));else for((null==end||end>this.length)&&(end=this.length),(null==start||1>start)&&(start=1),i=start;end>=i;i+=1)this._set(i,val);return this},Vector.prototype.rep=function(times){var arr,values;if(arr=[],values=this.toArray(),times instanceof Vector&&(times=times.toArray()),Array.isArray(times)){if(!this.sameLength(times))throw new Error('Incorrect "times" length.');return times.forEach(function(nTimes,i){for(nTimes=Math.floor(nTimes);nTimes>0;)arr.push(values[i]),nTimes-=1}),new Vector(arr)}return null!=times.length?this.resize(Math.floor(times.length),!0):null!=times.each?(times.each=Math.floor(times.each),new Vector(function(i){return values[Math.floor((i-1)/times.each)]},times.each*this.length)):this.resize(Math.floor(times)*this.length,!0)},Vector.prototype.concat=function(vectors){return vectors=Array.prototype.slice.call(arguments),vectors.unshift(this),Vector.concat.apply(null,vectors)},Vector.prototype.resize=function(length,fill){var arr,i,f;for(arr=this.toArray().slice(0,length),f="function"==typeof fill?fill:fill?function(i){return arr[(i-1)%this.length]}:function(){return 0},i=this.length+1;length>=i;i+=1)arr.push(f.call(this,i));return new Vector(arr).mutable(this.mutable())},Vector.prototype.permute=function(perm){var invPerm;return invPerm=new Permutation(perm).inverse(),this.view(invPerm.get.bind(invPerm),this.length)},Vector.prototype.each=function(){throw new Error("Subclasses of Vector need to implement each: "+this.constructor.name)},Vector.prototype.forEach=function(){return this.each.apply(this,[].slice.call(arguments))},Vector.prototype.eachPair=function(v2,f,skipZeros){if(!this.sameLength(v2))throw new Error("Vector#eachPair: vectors should be same langth");return v2.isSparse()?(v2.eachPair(this,swap(f),skipZeros),this):(this.each(function(val,i){f(val,v2._get(i),i)}),this)},Vector.prototype.reduce=function(f,initial,skipZeros){return initial=initial||0,this.each(function(val,i){initial=f(initial,val,i)},skipZeros),initial},Vector.prototype.reducePair=function(v2,f,initial,skipZeros){return initial=initial||0,this.eachPair(v2,function(val1,val2,i){initial=f(initial,val1,val2,i)},skipZeros),initial},Vector.prototype.foldl=Vector.prototype.reduce,Vector.prototype.map=function(f){var f2=function(i){return f(this._get(i),i)}.bind(this);return new Vector(f2,this.length)},Vector.prototype.mapPair=function(v2,f,skipZeros){if(!this.sameLength(v2))throw new Error("Vector.mapPair: vectors should be same langth");return skipZeros&&v2.isSparse()?v2.mapPair(this,swap(f),skipZeros):new Vector(function(i){return f(this._get(i),v2._get(i),i)}.bind(this),this.length)},Vector.prototype.any=function(pred){var i;for(i=1;i<=this.length;i+=1)if(pred(this.get(i),i))return!0;return!1},Vector.prototype.all=function(pred){var i;for(i=1;i<=this.length;i+=1)if(!pred(this.get(i),i))return!1;return!0},Vector.prototype.norm=function(p){var res;return null==p&&(p=2),1/0===p?this.reduce(function(acc,val){return Math.max(acc,Math.abs(val))},0,!0):(res=this.reduce(function(acc,val){return acc+Math.pow(Math.abs(val),p)},0,!0),Math.pow(res,1/p))},Vector.prototype.dot=function(v){return this.reducePair(v,function(acc,val1,val2){return acc+val1*val2},0,!0)},Vector.prototype.toArray=function(){if(this.cached)return this.values.slice();var arr=[];return this.each(function(val){arr.push(val)}),arr},Vector.prototype.clone=function(){return new Vector(this.toArray())},Vector.prototype.equals=function(v2,tolerance){var i;if(tolerance=tolerance||Vector.tolerance,!this.sameLength(v2))return!1;for(i=1;i<=this.length;i+=1)if(!utils.veryClose(this.get(i),v2.get(i),tolerance))return!1;return!0},Vector.prototype.pAdd=function(v){return this.mapPair(v,op.add,!1)},Vector.prototype.pSub=function(v){return this.mapPair(v,op.sub,!1)},Vector.prototype.sMult=function(a){return this.map(function(val){return a*val},!0)},Vector.prototype.pMult=function(v){return this.mapPair(v,op.mult,!0)},Vector.prototype.pDiv=function(v){return this.mapPair(v,op.div,!1)},Vector.prototype.pPow=function(n){return this.map(function(val){return Math.pow(val,n)},n>0)},Vector.prototype.order=function(desc){var f;return"function"!=typeof desc&&(desc=desc===!0?function(a,b){return isNaN(b)?-1:isNaN(a)?1:a>b?-1:a===b?0:1}:function(a,b){return isNaN(b)?-1:isNaN(a)?1:b>a?-1:a===b?0:1}),f=function(i,j){return desc(this.get(i),this.get(j))}.bind(this),new Vector(Vector.seq(this.length).toArray().sort(f))},Vector.prototype.sort=function(desc){return this.view(this.order(desc).toArray())},Vector.prototype.diff=function(){return new Vector(function(i){return this._get(i+1)-this._get(i)}.bind(this),this.length-1)},Vector.prototype.cumulative=function(f,initial){var arr=[];return this.reduce(function(acc,val,i){return acc=f(acc,val,i),arr.push(acc),acc},initial||0,!1),new Vector(arr)},Vector.prototype.cumSum=function(){return this.cumulative(op.add,0)},Vector.prototype.cumProd=function(){return this.cumulative(op.mult,1)},Vector.prototype.cumMin=function(){return this.cumulative(function(a,b){return Math.min(a,b)},1/0)},Vector.prototype.cumMax=function(){return this.cumulative(function(a,b){return Math.max(a,b)},-1/0)},Vector.prototype.isSparse=function(){return!1},Vector.prototype.sameLength=function(other){return this.length===other.length},Vector})}("function"==typeof define&&define.amd?define:function(factory){"use strict";module.exports=factory(require)})},{"./permutation.js":37,"./utils":44,"./vector/const":46,"./vector/dense":47,"./vector/sparse":48,"./vector/tabular":49,"./vector/view":50}],46:[function(require,module){!function(define){"use strict";define(function(){return function(Vector){function ConstV(val,len){this.val=val,this.length=len,this.cached=!1}return ConstV.prototype=Object.create(Vector.prototype),ConstV.prototype._get=function(i){return 1>i||i>this.length?null:this.val},ConstV.prototype.mutable=function(newSetting){if(null==newSetting)return!1;throw new Error("Cannot set a constant to be mutable")},ConstV.prototype.each=function(f){var i;for(i=1;i<=this.length;i+=1)f(this.val,i);return this},ConstV}})}("function"==typeof define&&define.amd?define:function(factory){"use strict";module.exports=factory(require)})},{}],47:[function(require,module){!function(define){"use strict";define(function(){return function(Vector){function DenseV(arr){this.values=arr,this.length=arr.length,this.cached=!0}return DenseV.prototype=Object.create(Vector.prototype),DenseV.prototype.change=function(i,val){return this.values||(this.values=[]),this.values[i-1]=val,this},DenseV.prototype.each=function(f){return this.force(),(this.values||[]).forEach(function(val,i){f(val,i+1)}),this},DenseV}})}("function"==typeof define&&define.amd?define:function(factory){"use strict";module.exports=factory(require)})},{}],48:[function(require,module){!function(define){"use strict";define(function(){return function(Vector){function SparseV(arr,len){this._values=arr,this.length=len,this.cached=!1}return SparseV.prototype=Object.create(Vector.prototype),SparseV.prototype._get=function(i){return 1>i||i>this.length?null:this._values.hasOwnProperty(i)?this._values[i]:0},SparseV.prototype.change=function(i,val){return this._values[i]=val,this},SparseV.prototype.each=function(f,skipZeros){var i,vals;if(vals=this._values,skipZeros)Object.keys(vals).forEach(function(i){f(vals[i],parseInt(i))});else for(i=1;i<=this.length;i+=1)f(this._get(i),i);return this},SparseV.prototype.eachPair=function(v2,f,skipZeros){var i,vals;if(!this.sameLength(v2))throw new Error("SparseV#eachPair: vectors should be same langth");if(vals=this._values,skipZeros)Object.keys(vals).forEach(function(i){f(vals[i],v2._get(parseInt(i)),parseInt(i))});else for(i=1;i<=this.length;i+=1)f(this._get(i),v2._get(i),i);return Vector},SparseV.prototype.map=function(f,skipZeros){if(!skipZeros)return Vector.prototype.map.call(this,f);var newValues={};return this.each(function(val,i){newValues[i]=f(val,i)},!0),new Vector(newValues,this.length)},SparseV.prototype.mapPair=function(v2,f,skipZeros){if(!this.sameLength(v2))throw new Error("Vector.mapPair: vectors should be same langth");var newValues={};return skipZeros||v2.isSparse()?(this.eachPair(v2,function(val1,val2,i){newValues[i]=f(val1,val2,i)},!0),new Vector(newValues,this.length)):new Vector(function(i){return f(this._get(i),v2._get(i),i)}.bind(this),this.length)},SparseV.prototype.clone=function(){var values={},oldValues=this._values;return Object.keys(oldValues).forEach(function(k){values[k]=oldValues[k]}),new Vector(values,this.length)},SparseV.prototype.resize=function(length,fill){function fillMore(fill){for(key=this.length+1;length>=key;key+=1)val=fill.call(this,key),0!==val&&(obj[key]=val)}var obj,key,val,values;obj={},values=this._values;for(key in values)values.hasOwnProperty(key)&&parseInt(key)<=length&&(obj[key]=values[key]);return"function"==typeof fill?fillMore.call(this,fill):fill===!0&&fillMore.call(this,function(key){return this.get((key-1)%this.length+1)}),new Vector(obj,length)},SparseV.prototype.isSparse=function(){return!0},SparseV}})}("function"==typeof define&&define.amd?define:function(factory){"use strict";module.exports=factory(require)})},{}],49:[function(require,module){!function(define){"use strict";define(function(){return function(Vector){function TabularV(f,len){this.f=f,this.length=len,this.cached=!1}function fmoot(){throw new Error("Should not call the function of a cached tabular object")}return TabularV.prototype=Object.create(Vector.DenseV.prototype),TabularV.each=function(v,f){return v.force().each(f),Vector},TabularV.prototype.compute=function(i){return this.f(i)},TabularV.prototype.force=function(){var i;if(!this.cached){for(i=1;i<=this.length;i+=1)this._get(i);this.cached=!0,this.f=fmoot}return this},TabularV}})}("function"==typeof define&&define.amd?define:function(factory){"use strict";module.exports=factory(require)})},{}],50:[function(require,module){!function(define){"use strict";define(function(){return function(Vector){function ViewV(target,indices,len){if(!this instanceof ViewV)return new ViewV(target,indices,len);if(this.target=target,"function"==typeof indices){if(this.i=indices,null==len)throw new Error("ViewV with function requires length arg");this.length=len}else this.i=function(i){return indices[i-1]},this.length=indices.length;return this.cached=!1,this}return ViewV.prototype=Object.create(Vector.prototype),ViewV.prototype._get=function(i){return 1>i||i>this.length?null:this.compute(i)},ViewV.prototype.compute=function(i){return this.target._get(this.i(i))},ViewV.prototype.change=function(i,val){return this.target._set(this.i(i),val),this},ViewV.prototype.mutable=function(newSetting){return null!=newSetting?(this.target.mutable(newSetting),this):this.target.mutable()},ViewV.prototype.each=function(f){var i;for(i=1;i<=this.length;i+=1)f(this._get(i),i);return Vector},ViewV}})}("function"==typeof define&&define.amd?define:function(factory){"use strict";module.exports=factory(require)})},{}],51:[function(require,module){(function(global){(function(undefined){function dfl(a,b,c){switch(arguments.length){case 2:return null!=a?a:b;case 3:return null!=a?a:null!=b?b:c;default:throw new Error("Implement me")}}function hasOwnProp(a,b){return hasOwnProperty.call(a,b)}function defaultParsingFlags(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}
}function printMsg(msg){moment.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+msg)}function deprecate(msg,fn){var firstTime=!0;return extend(function(){return firstTime&&(printMsg(msg),firstTime=!1),fn.apply(this,arguments)},fn)}function deprecateSimple(name,msg){deprecations[name]||(printMsg(msg),deprecations[name]=!0)}function padToken(func,count){return function(a){return leftZeroFill(func.call(this,a),count)}}function ordinalizeToken(func,period){return function(a){return this.localeData().ordinal(func.call(this,a),period)}}function Locale(){}function Moment(config,skipOverflow){skipOverflow!==!1&&checkOverflow(config),copyConfig(this,config),this._d=new Date(+config._d)}function Duration(duration){var normalizedInput=normalizeObjectUnits(duration),years=normalizedInput.year||0,quarters=normalizedInput.quarter||0,months=normalizedInput.month||0,weeks=normalizedInput.week||0,days=normalizedInput.day||0,hours=normalizedInput.hour||0,minutes=normalizedInput.minute||0,seconds=normalizedInput.second||0,milliseconds=normalizedInput.millisecond||0;this._milliseconds=+milliseconds+1e3*seconds+6e4*minutes+36e5*hours,this._days=+days+7*weeks,this._months=+months+3*quarters+12*years,this._data={},this._locale=moment.localeData(),this._bubble()}function extend(a,b){for(var i in b)hasOwnProp(b,i)&&(a[i]=b[i]);return hasOwnProp(b,"toString")&&(a.toString=b.toString),hasOwnProp(b,"valueOf")&&(a.valueOf=b.valueOf),a}function copyConfig(to,from){var i,prop,val;if("undefined"!=typeof from._isAMomentObject&&(to._isAMomentObject=from._isAMomentObject),"undefined"!=typeof from._i&&(to._i=from._i),"undefined"!=typeof from._f&&(to._f=from._f),"undefined"!=typeof from._l&&(to._l=from._l),"undefined"!=typeof from._strict&&(to._strict=from._strict),"undefined"!=typeof from._tzm&&(to._tzm=from._tzm),"undefined"!=typeof from._isUTC&&(to._isUTC=from._isUTC),"undefined"!=typeof from._offset&&(to._offset=from._offset),"undefined"!=typeof from._pf&&(to._pf=from._pf),"undefined"!=typeof from._locale&&(to._locale=from._locale),momentProperties.length>0)for(i in momentProperties)prop=momentProperties[i],val=from[prop],"undefined"!=typeof val&&(to[prop]=val);return to}function absRound(number){return 0>number?Math.ceil(number):Math.floor(number)}function leftZeroFill(number,targetLength,forceSign){for(var output=""+Math.abs(number),sign=number>=0;output.length<targetLength;)output="0"+output;return(sign?forceSign?"+":"":"-")+output}function positiveMomentsDifference(base,other){var res={milliseconds:0,months:0};return res.months=other.month()-base.month()+12*(other.year()-base.year()),base.clone().add(res.months,"M").isAfter(other)&&--res.months,res.milliseconds=+other-+base.clone().add(res.months,"M"),res}function momentsDifference(base,other){var res;return other=makeAs(other,base),base.isBefore(other)?res=positiveMomentsDifference(base,other):(res=positiveMomentsDifference(other,base),res.milliseconds=-res.milliseconds,res.months=-res.months),res}function createAdder(direction,name){return function(val,period){var dur,tmp;return null===period||isNaN(+period)||(deprecateSimple(name,"moment()."+name+"(period, number) is deprecated. Please use moment()."+name+"(number, period)."),tmp=val,val=period,period=tmp),val="string"==typeof val?+val:val,dur=moment.duration(val,period),addOrSubtractDurationFromMoment(this,dur,direction),this}}function addOrSubtractDurationFromMoment(mom,duration,isAdding,updateOffset){var milliseconds=duration._milliseconds,days=duration._days,months=duration._months;updateOffset=null==updateOffset?!0:updateOffset,milliseconds&&mom._d.setTime(+mom._d+milliseconds*isAdding),days&&rawSetter(mom,"Date",rawGetter(mom,"Date")+days*isAdding),months&&rawMonthSetter(mom,rawGetter(mom,"Month")+months*isAdding),updateOffset&&moment.updateOffset(mom,days||months)}function isArray(input){return"[object Array]"===Object.prototype.toString.call(input)}function isDate(input){return"[object Date]"===Object.prototype.toString.call(input)||input instanceof Date}function compareArrays(array1,array2,dontConvert){var i,len=Math.min(array1.length,array2.length),lengthDiff=Math.abs(array1.length-array2.length),diffs=0;for(i=0;len>i;i++)(dontConvert&&array1[i]!==array2[i]||!dontConvert&&toInt(array1[i])!==toInt(array2[i]))&&diffs++;return diffs+lengthDiff}function normalizeUnits(units){if(units){var lowered=units.toLowerCase().replace(/(.)s$/,"$1");units=unitAliases[units]||camelFunctions[lowered]||lowered}return units}function normalizeObjectUnits(inputObject){var normalizedProp,prop,normalizedInput={};for(prop in inputObject)hasOwnProp(inputObject,prop)&&(normalizedProp=normalizeUnits(prop),normalizedProp&&(normalizedInput[normalizedProp]=inputObject[prop]));return normalizedInput}function makeList(field){var count,setter;if(0===field.indexOf("week"))count=7,setter="day";else{if(0!==field.indexOf("month"))return;count=12,setter="month"}moment[field]=function(format,index){var i,getter,method=moment._locale[field],results=[];if("number"==typeof format&&(index=format,format=undefined),getter=function(i){var m=moment().utc().set(setter,i);return method.call(moment._locale,m,format||"")},null!=index)return getter(index);for(i=0;count>i;i++)results.push(getter(i));return results}}function toInt(argumentForCoercion){var coercedNumber=+argumentForCoercion,value=0;return 0!==coercedNumber&&isFinite(coercedNumber)&&(value=coercedNumber>=0?Math.floor(coercedNumber):Math.ceil(coercedNumber)),value}function daysInMonth(year,month){return new Date(Date.UTC(year,month+1,0)).getUTCDate()}function weeksInYear(year,dow,doy){return weekOfYear(moment([year,11,31+dow-doy]),dow,doy).week}function daysInYear(year){return isLeapYear(year)?366:365}function isLeapYear(year){return year%4===0&&year%100!==0||year%400===0}function checkOverflow(m){var overflow;m._a&&-2===m._pf.overflow&&(overflow=m._a[MONTH]<0||m._a[MONTH]>11?MONTH:m._a[DATE]<1||m._a[DATE]>daysInMonth(m._a[YEAR],m._a[MONTH])?DATE:m._a[HOUR]<0||m._a[HOUR]>23?HOUR:m._a[MINUTE]<0||m._a[MINUTE]>59?MINUTE:m._a[SECOND]<0||m._a[SECOND]>59?SECOND:m._a[MILLISECOND]<0||m._a[MILLISECOND]>999?MILLISECOND:-1,m._pf._overflowDayOfYear&&(YEAR>overflow||overflow>DATE)&&(overflow=DATE),m._pf.overflow=overflow)}function isValid(m){return null==m._isValid&&(m._isValid=!isNaN(m._d.getTime())&&m._pf.overflow<0&&!m._pf.empty&&!m._pf.invalidMonth&&!m._pf.nullInput&&!m._pf.invalidFormat&&!m._pf.userInvalidated,m._strict&&(m._isValid=m._isValid&&0===m._pf.charsLeftOver&&0===m._pf.unusedTokens.length)),m._isValid}function normalizeLocale(key){return key?key.toLowerCase().replace("_","-"):key}function chooseLocale(names){for(var j,next,locale,split,i=0;i<names.length;){for(split=normalizeLocale(names[i]).split("-"),j=split.length,next=normalizeLocale(names[i+1]),next=next?next.split("-"):null;j>0;){if(locale=loadLocale(split.slice(0,j).join("-")))return locale;if(next&&next.length>=j&&compareArrays(split,next,!0)>=j-1)break;j--}i++}return null}function loadLocale(name){var oldLocale=null;if(!locales[name]&&hasModule)try{oldLocale=moment.locale(),require("./locale/"+name),moment.locale(oldLocale)}catch(e){}return locales[name]}function makeAs(input,model){return model._isUTC?moment(input).zone(model._offset||0):moment(input).local()}function removeFormattingTokens(input){return input.match(/\[[\s\S]/)?input.replace(/^\[|\]$/g,""):input.replace(/\\/g,"")}function makeFormatFunction(format){var i,length,array=format.match(formattingTokens);for(i=0,length=array.length;length>i;i++)array[i]=formatTokenFunctions[array[i]]?formatTokenFunctions[array[i]]:removeFormattingTokens(array[i]);return function(mom){var output="";for(i=0;length>i;i++)output+=array[i]instanceof Function?array[i].call(mom,format):array[i];return output}}function formatMoment(m,format){return m.isValid()?(format=expandFormat(format,m.localeData()),formatFunctions[format]||(formatFunctions[format]=makeFormatFunction(format)),formatFunctions[format](m)):m.localeData().invalidDate()}function expandFormat(format,locale){function replaceLongDateFormatTokens(input){return locale.longDateFormat(input)||input}var i=5;for(localFormattingTokens.lastIndex=0;i>=0&&localFormattingTokens.test(format);)format=format.replace(localFormattingTokens,replaceLongDateFormatTokens),localFormattingTokens.lastIndex=0,i-=1;return format}function getParseRegexForToken(token,config){var a,strict=config._strict;switch(token){case"Q":return parseTokenOneDigit;case"DDDD":return parseTokenThreeDigits;case"YYYY":case"GGGG":case"gggg":return strict?parseTokenFourDigits:parseTokenOneToFourDigits;case"Y":case"G":case"g":return parseTokenSignedNumber;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return strict?parseTokenSixDigits:parseTokenOneToSixDigits;case"S":if(strict)return parseTokenOneDigit;case"SS":if(strict)return parseTokenTwoDigits;case"SSS":if(strict)return parseTokenThreeDigits;case"DDD":return parseTokenOneToThreeDigits;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return parseTokenWord;case"a":case"A":return config._locale._meridiemParse;case"X":return parseTokenTimestampMs;case"Z":case"ZZ":return parseTokenTimezone;case"T":return parseTokenT;case"SSSS":return parseTokenDigits;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return strict?parseTokenTwoDigits:parseTokenOneOrTwoDigits;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return parseTokenOneOrTwoDigits;case"Do":return parseTokenOrdinal;default:return a=new RegExp(regexpEscape(unescapeFormat(token.replace("\\","")),"i"))}}function timezoneMinutesFromString(string){string=string||"";var possibleTzMatches=string.match(parseTokenTimezone)||[],tzChunk=possibleTzMatches[possibleTzMatches.length-1]||[],parts=(tzChunk+"").match(parseTimezoneChunker)||["-",0,0],minutes=+(60*parts[1])+toInt(parts[2]);return"+"===parts[0]?-minutes:minutes}function addTimeToArrayFromToken(token,input,config){var a,datePartArray=config._a;switch(token){case"Q":null!=input&&(datePartArray[MONTH]=3*(toInt(input)-1));break;case"M":case"MM":null!=input&&(datePartArray[MONTH]=toInt(input)-1);break;case"MMM":case"MMMM":a=config._locale.monthsParse(input),null!=a?datePartArray[MONTH]=a:config._pf.invalidMonth=input;break;case"D":case"DD":null!=input&&(datePartArray[DATE]=toInt(input));break;case"Do":null!=input&&(datePartArray[DATE]=toInt(parseInt(input,10)));break;case"DDD":case"DDDD":null!=input&&(config._dayOfYear=toInt(input));break;case"YY":datePartArray[YEAR]=moment.parseTwoDigitYear(input);break;case"YYYY":case"YYYYY":case"YYYYYY":datePartArray[YEAR]=toInt(input);break;case"a":case"A":config._isPm=config._locale.isPM(input);break;case"H":case"HH":case"h":case"hh":datePartArray[HOUR]=toInt(input);break;case"m":case"mm":datePartArray[MINUTE]=toInt(input);break;case"s":case"ss":datePartArray[SECOND]=toInt(input);break;case"S":case"SS":case"SSS":case"SSSS":datePartArray[MILLISECOND]=toInt(1e3*("0."+input));break;case"X":config._d=new Date(1e3*parseFloat(input));break;case"Z":case"ZZ":config._useUTC=!0,config._tzm=timezoneMinutesFromString(input);break;case"dd":case"ddd":case"dddd":a=config._locale.weekdaysParse(input),null!=a?(config._w=config._w||{},config._w.d=a):config._pf.invalidWeekday=input;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":token=token.substr(0,1);case"gggg":case"GGGG":case"GGGGG":token=token.substr(0,2),input&&(config._w=config._w||{},config._w[token]=toInt(input));break;case"gg":case"GG":config._w=config._w||{},config._w[token]=moment.parseTwoDigitYear(input)}}function dayOfYearFromWeekInfo(config){var w,weekYear,week,weekday,dow,doy,temp;w=config._w,null!=w.GG||null!=w.W||null!=w.E?(dow=1,doy=4,weekYear=dfl(w.GG,config._a[YEAR],weekOfYear(moment(),1,4).year),week=dfl(w.W,1),weekday=dfl(w.E,1)):(dow=config._locale._week.dow,doy=config._locale._week.doy,weekYear=dfl(w.gg,config._a[YEAR],weekOfYear(moment(),dow,doy).year),week=dfl(w.w,1),null!=w.d?(weekday=w.d,dow>weekday&&++week):weekday=null!=w.e?w.e+dow:dow),temp=dayOfYearFromWeeks(weekYear,week,weekday,doy,dow),config._a[YEAR]=temp.year,config._dayOfYear=temp.dayOfYear}function dateFromConfig(config){var i,date,currentDate,yearToUse,input=[];if(!config._d){for(currentDate=currentDateArray(config),config._w&&null==config._a[DATE]&&null==config._a[MONTH]&&dayOfYearFromWeekInfo(config),config._dayOfYear&&(yearToUse=dfl(config._a[YEAR],currentDate[YEAR]),config._dayOfYear>daysInYear(yearToUse)&&(config._pf._overflowDayOfYear=!0),date=makeUTCDate(yearToUse,0,config._dayOfYear),config._a[MONTH]=date.getUTCMonth(),config._a[DATE]=date.getUTCDate()),i=0;3>i&&null==config._a[i];++i)config._a[i]=input[i]=currentDate[i];for(;7>i;i++)config._a[i]=input[i]=null==config._a[i]?2===i?1:0:config._a[i];config._d=(config._useUTC?makeUTCDate:makeDate).apply(null,input),null!=config._tzm&&config._d.setUTCMinutes(config._d.getUTCMinutes()+config._tzm)}}function dateFromObject(config){var normalizedInput;config._d||(normalizedInput=normalizeObjectUnits(config._i),config._a=[normalizedInput.year,normalizedInput.month,normalizedInput.day,normalizedInput.hour,normalizedInput.minute,normalizedInput.second,normalizedInput.millisecond],dateFromConfig(config))}function currentDateArray(config){var now=new Date;return config._useUTC?[now.getUTCFullYear(),now.getUTCMonth(),now.getUTCDate()]:[now.getFullYear(),now.getMonth(),now.getDate()]}function makeDateFromStringAndFormat(config){if(config._f===moment.ISO_8601)return void parseISO(config);config._a=[],config._pf.empty=!0;var i,parsedInput,tokens,token,skipped,string=""+config._i,stringLength=string.length,totalParsedInputLength=0;for(tokens=expandFormat(config._f,config._locale).match(formattingTokens)||[],i=0;i<tokens.length;i++)token=tokens[i],parsedInput=(string.match(getParseRegexForToken(token,config))||[])[0],parsedInput&&(skipped=string.substr(0,string.indexOf(parsedInput)),skipped.length>0&&config._pf.unusedInput.push(skipped),string=string.slice(string.indexOf(parsedInput)+parsedInput.length),totalParsedInputLength+=parsedInput.length),formatTokenFunctions[token]?(parsedInput?config._pf.empty=!1:config._pf.unusedTokens.push(token),addTimeToArrayFromToken(token,parsedInput,config)):config._strict&&!parsedInput&&config._pf.unusedTokens.push(token);config._pf.charsLeftOver=stringLength-totalParsedInputLength,string.length>0&&config._pf.unusedInput.push(string),config._isPm&&config._a[HOUR]<12&&(config._a[HOUR]+=12),config._isPm===!1&&12===config._a[HOUR]&&(config._a[HOUR]=0),dateFromConfig(config),checkOverflow(config)}function unescapeFormat(s){return s.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(matched,p1,p2,p3,p4){return p1||p2||p3||p4})}function regexpEscape(s){return s.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function makeDateFromStringAndArray(config){var tempConfig,bestMoment,scoreToBeat,i,currentScore;if(0===config._f.length)return config._pf.invalidFormat=!0,void(config._d=new Date(0/0));for(i=0;i<config._f.length;i++)currentScore=0,tempConfig=copyConfig({},config),null!=config._useUTC&&(tempConfig._useUTC=config._useUTC),tempConfig._pf=defaultParsingFlags(),tempConfig._f=config._f[i],makeDateFromStringAndFormat(tempConfig),isValid(tempConfig)&&(currentScore+=tempConfig._pf.charsLeftOver,currentScore+=10*tempConfig._pf.unusedTokens.length,tempConfig._pf.score=currentScore,(null==scoreToBeat||scoreToBeat>currentScore)&&(scoreToBeat=currentScore,bestMoment=tempConfig));extend(config,bestMoment||tempConfig)}function parseISO(config){var i,l,string=config._i,match=isoRegex.exec(string);if(match){for(config._pf.iso=!0,i=0,l=isoDates.length;l>i;i++)if(isoDates[i][1].exec(string)){config._f=isoDates[i][0]+(match[6]||" ");break}for(i=0,l=isoTimes.length;l>i;i++)if(isoTimes[i][1].exec(string)){config._f+=isoTimes[i][0];break}string.match(parseTokenTimezone)&&(config._f+="Z"),makeDateFromStringAndFormat(config)}else config._isValid=!1}function makeDateFromString(config){parseISO(config),config._isValid===!1&&(delete config._isValid,moment.createFromInputFallback(config))}function map(arr,fn){var i,res=[];for(i=0;i<arr.length;++i)res.push(fn(arr[i],i));return res}function makeDateFromInput(config){var matched,input=config._i;input===undefined?config._d=new Date:isDate(input)?config._d=new Date(+input):null!==(matched=aspNetJsonRegex.exec(input))?config._d=new Date(+matched[1]):"string"==typeof input?makeDateFromString(config):isArray(input)?(config._a=map(input.slice(0),function(obj){return parseInt(obj,10)}),dateFromConfig(config)):"object"==typeof input?dateFromObject(config):"number"==typeof input?config._d=new Date(input):moment.createFromInputFallback(config)}function makeDate(y,m,d,h,M,s,ms){var date=new Date(y,m,d,h,M,s,ms);return 1970>y&&date.setFullYear(y),date}function makeUTCDate(y){var date=new Date(Date.UTC.apply(null,arguments));return 1970>y&&date.setUTCFullYear(y),date}function parseWeekday(input,locale){if("string"==typeof input)if(isNaN(input)){if(input=locale.weekdaysParse(input),"number"!=typeof input)return null}else input=parseInt(input,10);return input}function substituteTimeAgo(string,number,withoutSuffix,isFuture,locale){return locale.relativeTime(number||1,!!withoutSuffix,string,isFuture)}function relativeTime(posNegDuration,withoutSuffix,locale){var duration=moment.duration(posNegDuration).abs(),seconds=round(duration.as("s")),minutes=round(duration.as("m")),hours=round(duration.as("h")),days=round(duration.as("d")),months=round(duration.as("M")),years=round(duration.as("y")),args=seconds<relativeTimeThresholds.s&&["s",seconds]||1===minutes&&["m"]||minutes<relativeTimeThresholds.m&&["mm",minutes]||1===hours&&["h"]||hours<relativeTimeThresholds.h&&["hh",hours]||1===days&&["d"]||days<relativeTimeThresholds.d&&["dd",days]||1===months&&["M"]||months<relativeTimeThresholds.M&&["MM",months]||1===years&&["y"]||["yy",years];return args[2]=withoutSuffix,args[3]=+posNegDuration>0,args[4]=locale,substituteTimeAgo.apply({},args)}function weekOfYear(mom,firstDayOfWeek,firstDayOfWeekOfYear){var adjustedMoment,end=firstDayOfWeekOfYear-firstDayOfWeek,daysToDayOfWeek=firstDayOfWeekOfYear-mom.day();return daysToDayOfWeek>end&&(daysToDayOfWeek-=7),end-7>daysToDayOfWeek&&(daysToDayOfWeek+=7),adjustedMoment=moment(mom).add(daysToDayOfWeek,"d"),{week:Math.ceil(adjustedMoment.dayOfYear()/7),year:adjustedMoment.year()}}function dayOfYearFromWeeks(year,week,weekday,firstDayOfWeekOfYear,firstDayOfWeek){var daysToAdd,dayOfYear,d=makeUTCDate(year,0,1).getUTCDay();return d=0===d?7:d,weekday=null!=weekday?weekday:firstDayOfWeek,daysToAdd=firstDayOfWeek-d+(d>firstDayOfWeekOfYear?7:0)-(firstDayOfWeek>d?7:0),dayOfYear=7*(week-1)+(weekday-firstDayOfWeek)+daysToAdd+1,{year:dayOfYear>0?year:year-1,dayOfYear:dayOfYear>0?dayOfYear:daysInYear(year-1)+dayOfYear}}function makeMoment(config){var input=config._i,format=config._f;return config._locale=config._locale||moment.localeData(config._l),null===input||format===undefined&&""===input?moment.invalid({nullInput:!0}):("string"==typeof input&&(config._i=input=config._locale.preparse(input)),moment.isMoment(input)?new Moment(input,!0):(format?isArray(format)?makeDateFromStringAndArray(config):makeDateFromStringAndFormat(config):makeDateFromInput(config),new Moment(config)))}function pickBy(fn,moments){var res,i;if(1===moments.length&&isArray(moments[0])&&(moments=moments[0]),!moments.length)return moment();for(res=moments[0],i=1;i<moments.length;++i)moments[i][fn](res)&&(res=moments[i]);return res}function rawMonthSetter(mom,value){var dayOfMonth;return"string"==typeof value&&(value=mom.localeData().monthsParse(value),"number"!=typeof value)?mom:(dayOfMonth=Math.min(mom.date(),daysInMonth(mom.year(),value)),mom._d["set"+(mom._isUTC?"UTC":"")+"Month"](value,dayOfMonth),mom)}function rawGetter(mom,unit){return mom._d["get"+(mom._isUTC?"UTC":"")+unit]()}function rawSetter(mom,unit,value){return"Month"===unit?rawMonthSetter(mom,value):mom._d["set"+(mom._isUTC?"UTC":"")+unit](value)}function makeAccessor(unit,keepTime){return function(value){return null!=value?(rawSetter(this,unit,value),moment.updateOffset(this,keepTime),this):rawGetter(this,unit)}}function daysToYears(days){return 400*days/146097}function yearsToDays(years){return 146097*years/400}function makeDurationGetter(name){moment.duration.fn[name]=function(){return this._data[name]}}function makeGlobal(shouldDeprecate){"undefined"==typeof ender&&(oldGlobalMoment=globalScope.moment,globalScope.moment=shouldDeprecate?deprecate("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",moment):moment)}for(var moment,oldGlobalMoment,i,VERSION="2.8.3",globalScope="undefined"!=typeof global?global:this,round=Math.round,hasOwnProperty=Object.prototype.hasOwnProperty,YEAR=0,MONTH=1,DATE=2,HOUR=3,MINUTE=4,SECOND=5,MILLISECOND=6,locales={},momentProperties=[],hasModule="undefined"!=typeof module&&module.exports,aspNetJsonRegex=/^\/?Date\((\-?\d+)/i,aspNetTimeSpanJsonRegex=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,isoDurationRegex=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,formattingTokens=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,localFormattingTokens=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,parseTokenOneOrTwoDigits=/\d\d?/,parseTokenOneToThreeDigits=/\d{1,3}/,parseTokenOneToFourDigits=/\d{1,4}/,parseTokenOneToSixDigits=/[+\-]?\d{1,6}/,parseTokenDigits=/\d+/,parseTokenWord=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,parseTokenTimezone=/Z|[\+\-]\d\d:?\d\d/gi,parseTokenT=/T/i,parseTokenTimestampMs=/[\+\-]?\d+(\.\d{1,3})?/,parseTokenOrdinal=/\d{1,2}/,parseTokenOneDigit=/\d/,parseTokenTwoDigits=/\d\d/,parseTokenThreeDigits=/\d{3}/,parseTokenFourDigits=/\d{4}/,parseTokenSixDigits=/[+-]?\d{6}/,parseTokenSignedNumber=/[+-]?\d+/,isoRegex=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,isoFormat="YYYY-MM-DDTHH:mm:ssZ",isoDates=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],isoTimes=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],parseTimezoneChunker=/([\+\-]|\d\d)/gi,unitMillisecondFactors=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),unitAliases={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},camelFunctions={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},formatFunctions={},relativeTimeThresholds={s:45,m:45,h:22,d:26,M:11},ordinalizeTokens="DDD w W M D d".split(" "),paddedTokens="M D H h m s w W".split(" "),formatTokenFunctions={M:function(){return this.month()+1},MMM:function(format){return this.localeData().monthsShort(this,format)},MMMM:function(format){return this.localeData().months(this,format)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(format){return this.localeData().weekdaysMin(this,format)},ddd:function(format){return this.localeData().weekdaysShort(this,format)},dddd:function(format){return this.localeData().weekdays(this,format)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return leftZeroFill(this.year()%100,2)},YYYY:function(){return leftZeroFill(this.year(),4)},YYYYY:function(){return leftZeroFill(this.year(),5)},YYYYYY:function(){var y=this.year(),sign=y>=0?"+":"-";return sign+leftZeroFill(Math.abs(y),6)},gg:function(){return leftZeroFill(this.weekYear()%100,2)},gggg:function(){return leftZeroFill(this.weekYear(),4)},ggggg:function(){return leftZeroFill(this.weekYear(),5)},GG:function(){return leftZeroFill(this.isoWeekYear()%100,2)},GGGG:function(){return leftZeroFill(this.isoWeekYear(),4)},GGGGG:function(){return leftZeroFill(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return toInt(this.milliseconds()/100)},SS:function(){return leftZeroFill(toInt(this.milliseconds()/10),2)},SSS:function(){return leftZeroFill(this.milliseconds(),3)},SSSS:function(){return leftZeroFill(this.milliseconds(),3)},Z:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+leftZeroFill(toInt(a/60),2)+":"+leftZeroFill(toInt(a)%60,2)},ZZ:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+leftZeroFill(toInt(a/60),2)+leftZeroFill(toInt(a)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},deprecations={},lists=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];ordinalizeTokens.length;)i=ordinalizeTokens.pop(),formatTokenFunctions[i+"o"]=ordinalizeToken(formatTokenFunctions[i],i);for(;paddedTokens.length;)i=paddedTokens.pop(),formatTokenFunctions[i+i]=padToken(formatTokenFunctions[i],2);formatTokenFunctions.DDDD=padToken(formatTokenFunctions.DDD,3),extend(Locale.prototype,{set:function(config){var prop,i;for(i in config)prop=config[i],"function"==typeof prop?this[i]=prop:this["_"+i]=prop},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(m){return this._months[m.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(m){return this._monthsShort[m.month()]},monthsParse:function(monthName){var i,mom,regex;for(this._monthsParse||(this._monthsParse=[]),i=0;12>i;i++)if(this._monthsParse[i]||(mom=moment.utc([2e3,i]),regex="^"+this.months(mom,"")+"|^"+this.monthsShort(mom,""),this._monthsParse[i]=new RegExp(regex.replace(".",""),"i")),this._monthsParse[i].test(monthName))return i},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(m){return this._weekdays[m.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(m){return this._weekdaysShort[m.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(m){return this._weekdaysMin[m.day()]},weekdaysParse:function(weekdayName){var i,mom,regex;for(this._weekdaysParse||(this._weekdaysParse=[]),i=0;7>i;i++)if(this._weekdaysParse[i]||(mom=moment([2e3,1]).day(i),regex="^"+this.weekdays(mom,"")+"|^"+this.weekdaysShort(mom,"")+"|^"+this.weekdaysMin(mom,""),this._weekdaysParse[i]=new RegExp(regex.replace(".",""),"i")),this._weekdaysParse[i].test(weekdayName))return i},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(key){var output=this._longDateFormat[key];return!output&&this._longDateFormat[key.toUpperCase()]&&(output=this._longDateFormat[key.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(val){return val.slice(1)}),this._longDateFormat[key]=output),output},isPM:function(input){return"p"===(input+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(hours,minutes,isLower){return hours>11?isLower?"pm":"PM":isLower?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(key,mom){var output=this._calendar[key];return"function"==typeof output?output.apply(mom):output},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(number,withoutSuffix,string,isFuture){var output=this._relativeTime[string];return"function"==typeof output?output(number,withoutSuffix,string,isFuture):output.replace(/%d/i,number)},pastFuture:function(diff,output){var format=this._relativeTime[diff>0?"future":"past"];return"function"==typeof format?format(output):format.replace(/%s/i,output)},ordinal:function(number){return this._ordinal.replace("%d",number)},_ordinal:"%d",preparse:function(string){return string},postformat:function(string){return string},week:function(mom){return weekOfYear(mom,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),moment=function(input,format,locale,strict){var c;return"boolean"==typeof locale&&(strict=locale,locale=undefined),c={},c._isAMomentObject=!0,c._i=input,c._f=format,c._l=locale,c._strict=strict,c._isUTC=!1,c._pf=defaultParsingFlags(),makeMoment(c)},moment.suppressDeprecationWarnings=!1,moment.createFromInputFallback=deprecate("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(config){config._d=new Date(config._i)}),moment.min=function(){var args=[].slice.call(arguments,0);return pickBy("isBefore",args)},moment.max=function(){var args=[].slice.call(arguments,0);return pickBy("isAfter",args)},moment.utc=function(input,format,locale,strict){var c;return"boolean"==typeof locale&&(strict=locale,locale=undefined),c={},c._isAMomentObject=!0,c._useUTC=!0,c._isUTC=!0,c._l=locale,c._i=input,c._f=format,c._strict=strict,c._pf=defaultParsingFlags(),makeMoment(c).utc()},moment.unix=function(input){return moment(1e3*input)},moment.duration=function(input,key){var sign,ret,parseIso,diffRes,duration=input,match=null;return moment.isDuration(input)?duration={ms:input._milliseconds,d:input._days,M:input._months}:"number"==typeof input?(duration={},key?duration[key]=input:duration.milliseconds=input):(match=aspNetTimeSpanJsonRegex.exec(input))?(sign="-"===match[1]?-1:1,duration={y:0,d:toInt(match[DATE])*sign,h:toInt(match[HOUR])*sign,m:toInt(match[MINUTE])*sign,s:toInt(match[SECOND])*sign,ms:toInt(match[MILLISECOND])*sign}):(match=isoDurationRegex.exec(input))?(sign="-"===match[1]?-1:1,parseIso=function(inp){var res=inp&&parseFloat(inp.replace(",","."));return(isNaN(res)?0:res)*sign},duration={y:parseIso(match[2]),M:parseIso(match[3]),d:parseIso(match[4]),h:parseIso(match[5]),m:parseIso(match[6]),s:parseIso(match[7]),w:parseIso(match[8])}):"object"==typeof duration&&("from"in duration||"to"in duration)&&(diffRes=momentsDifference(moment(duration.from),moment(duration.to)),duration={},duration.ms=diffRes.milliseconds,duration.M=diffRes.months),ret=new Duration(duration),moment.isDuration(input)&&hasOwnProp(input,"_locale")&&(ret._locale=input._locale),ret},moment.version=VERSION,moment.defaultFormat=isoFormat,moment.ISO_8601=function(){},moment.momentProperties=momentProperties,moment.updateOffset=function(){},moment.relativeTimeThreshold=function(threshold,limit){return relativeTimeThresholds[threshold]===undefined?!1:limit===undefined?relativeTimeThresholds[threshold]:(relativeTimeThresholds[threshold]=limit,!0)},moment.lang=deprecate("moment.lang is deprecated. Use moment.locale instead.",function(key,value){return moment.locale(key,value)}),moment.locale=function(key,values){var data;return key&&(data="undefined"!=typeof values?moment.defineLocale(key,values):moment.localeData(key),data&&(moment.duration._locale=moment._locale=data)),moment._locale._abbr
},moment.defineLocale=function(name,values){return null!==values?(values.abbr=name,locales[name]||(locales[name]=new Locale),locales[name].set(values),moment.locale(name),locales[name]):(delete locales[name],null)},moment.langData=deprecate("moment.langData is deprecated. Use moment.localeData instead.",function(key){return moment.localeData(key)}),moment.localeData=function(key){var locale;if(key&&key._locale&&key._locale._abbr&&(key=key._locale._abbr),!key)return moment._locale;if(!isArray(key)){if(locale=loadLocale(key))return locale;key=[key]}return chooseLocale(key)},moment.isMoment=function(obj){return obj instanceof Moment||null!=obj&&hasOwnProp(obj,"_isAMomentObject")},moment.isDuration=function(obj){return obj instanceof Duration};for(i=lists.length-1;i>=0;--i)makeList(lists[i]);moment.normalizeUnits=function(units){return normalizeUnits(units)},moment.invalid=function(flags){var m=moment.utc(0/0);return null!=flags?extend(m._pf,flags):m._pf.userInvalidated=!0,m},moment.parseZone=function(){return moment.apply(null,arguments).parseZone()},moment.parseTwoDigitYear=function(input){return toInt(input)+(toInt(input)>68?1900:2e3)},extend(moment.fn=Moment.prototype,{clone:function(){return moment(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var m=moment(this).utc();return 0<m.year()&&m.year()<=9999?formatMoment(m,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):formatMoment(m,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var m=this;return[m.year(),m.month(),m.date(),m.hours(),m.minutes(),m.seconds(),m.milliseconds()]},isValid:function(){return isValid(this)},isDSTShifted:function(){return this._a?this.isValid()&&compareArrays(this._a,(this._isUTC?moment.utc(this._a):moment(this._a)).toArray())>0:!1},parsingFlags:function(){return extend({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(keepLocalTime){return this.zone(0,keepLocalTime)},local:function(keepLocalTime){return this._isUTC&&(this.zone(0,keepLocalTime),this._isUTC=!1,keepLocalTime&&this.add(this._dateTzOffset(),"m")),this},format:function(inputString){var output=formatMoment(this,inputString||moment.defaultFormat);return this.localeData().postformat(output)},add:createAdder(1,"add"),subtract:createAdder(-1,"subtract"),diff:function(input,units,asFloat){var diff,output,daysAdjust,that=makeAs(input,this),zoneDiff=6e4*(this.zone()-that.zone());return units=normalizeUnits(units),"year"===units||"month"===units?(diff=432e5*(this.daysInMonth()+that.daysInMonth()),output=12*(this.year()-that.year())+(this.month()-that.month()),daysAdjust=this-moment(this).startOf("month")-(that-moment(that).startOf("month")),daysAdjust-=6e4*(this.zone()-moment(this).startOf("month").zone()-(that.zone()-moment(that).startOf("month").zone())),output+=daysAdjust/diff,"year"===units&&(output/=12)):(diff=this-that,output="second"===units?diff/1e3:"minute"===units?diff/6e4:"hour"===units?diff/36e5:"day"===units?(diff-zoneDiff)/864e5:"week"===units?(diff-zoneDiff)/6048e5:diff),asFloat?output:absRound(output)},from:function(time,withoutSuffix){return moment.duration({to:this,from:time}).locale(this.locale()).humanize(!withoutSuffix)},fromNow:function(withoutSuffix){return this.from(moment(),withoutSuffix)},calendar:function(time){var now=time||moment(),sod=makeAs(now,this).startOf("day"),diff=this.diff(sod,"days",!0),format=-6>diff?"sameElse":-1>diff?"lastWeek":0>diff?"lastDay":1>diff?"sameDay":2>diff?"nextDay":7>diff?"nextWeek":"sameElse";return this.format(this.localeData().calendar(format,this))},isLeapYear:function(){return isLeapYear(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(input){var day=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=input?(input=parseWeekday(input,this.localeData()),this.add(input-day,"d")):day},month:makeAccessor("Month",!0),startOf:function(units){switch(units=normalizeUnits(units)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===units?this.weekday(0):"isoWeek"===units&&this.isoWeekday(1),"quarter"===units&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(units){return units=normalizeUnits(units),this.startOf(units).add(1,"isoWeek"===units?"week":units).subtract(1,"ms")},isAfter:function(input,units){return units=normalizeUnits("undefined"!=typeof units?units:"millisecond"),"millisecond"===units?(input=moment.isMoment(input)?input:moment(input),+this>+input):+this.clone().startOf(units)>+moment(input).startOf(units)},isBefore:function(input,units){return units=normalizeUnits("undefined"!=typeof units?units:"millisecond"),"millisecond"===units?(input=moment.isMoment(input)?input:moment(input),+input>+this):+this.clone().startOf(units)<+moment(input).startOf(units)},isSame:function(input,units){return units=normalizeUnits(units||"millisecond"),"millisecond"===units?(input=moment.isMoment(input)?input:moment(input),+this===+input):+this.clone().startOf(units)===+makeAs(input,this).startOf(units)},min:deprecate("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(other){return other=moment.apply(null,arguments),this>other?this:other}),max:deprecate("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(other){return other=moment.apply(null,arguments),other>this?this:other}),zone:function(input,keepLocalTime){var localAdjust,offset=this._offset||0;return null==input?this._isUTC?offset:this._dateTzOffset():("string"==typeof input&&(input=timezoneMinutesFromString(input)),Math.abs(input)<16&&(input=60*input),!this._isUTC&&keepLocalTime&&(localAdjust=this._dateTzOffset()),this._offset=input,this._isUTC=!0,null!=localAdjust&&this.subtract(localAdjust,"m"),offset!==input&&(!keepLocalTime||this._changeInProgress?addOrSubtractDurationFromMoment(this,moment.duration(offset-input,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,moment.updateOffset(this,!0),this._changeInProgress=null)),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(input){return input=input?moment(input).zone():0,(this.zone()-input)%60===0},daysInMonth:function(){return daysInMonth(this.year(),this.month())},dayOfYear:function(input){var dayOfYear=round((moment(this).startOf("day")-moment(this).startOf("year"))/864e5)+1;return null==input?dayOfYear:this.add(input-dayOfYear,"d")},quarter:function(input){return null==input?Math.ceil((this.month()+1)/3):this.month(3*(input-1)+this.month()%3)},weekYear:function(input){var year=weekOfYear(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==input?year:this.add(input-year,"y")},isoWeekYear:function(input){var year=weekOfYear(this,1,4).year;return null==input?year:this.add(input-year,"y")},week:function(input){var week=this.localeData().week(this);return null==input?week:this.add(7*(input-week),"d")},isoWeek:function(input){var week=weekOfYear(this,1,4).week;return null==input?week:this.add(7*(input-week),"d")},weekday:function(input){var weekday=(this.day()+7-this.localeData()._week.dow)%7;return null==input?weekday:this.add(input-weekday,"d")},isoWeekday:function(input){return null==input?this.day()||7:this.day(this.day()%7?input:input-7)},isoWeeksInYear:function(){return weeksInYear(this.year(),1,4)},weeksInYear:function(){var weekInfo=this.localeData()._week;return weeksInYear(this.year(),weekInfo.dow,weekInfo.doy)},get:function(units){return units=normalizeUnits(units),this[units]()},set:function(units,value){return units=normalizeUnits(units),"function"==typeof this[units]&&this[units](value),this},locale:function(key){var newLocaleData;return key===undefined?this._locale._abbr:(newLocaleData=moment.localeData(key),null!=newLocaleData&&(this._locale=newLocaleData),this)},lang:deprecate("moment().lang() is deprecated. Use moment().localeData() instead.",function(key){return key===undefined?this.localeData():this.locale(key)}),localeData:function(){return this._locale},_dateTzOffset:function(){return 15*Math.round(this._d.getTimezoneOffset()/15)}}),moment.fn.millisecond=moment.fn.milliseconds=makeAccessor("Milliseconds",!1),moment.fn.second=moment.fn.seconds=makeAccessor("Seconds",!1),moment.fn.minute=moment.fn.minutes=makeAccessor("Minutes",!1),moment.fn.hour=moment.fn.hours=makeAccessor("Hours",!0),moment.fn.date=makeAccessor("Date",!0),moment.fn.dates=deprecate("dates accessor is deprecated. Use date instead.",makeAccessor("Date",!0)),moment.fn.year=makeAccessor("FullYear",!0),moment.fn.years=deprecate("years accessor is deprecated. Use year instead.",makeAccessor("FullYear",!0)),moment.fn.days=moment.fn.day,moment.fn.months=moment.fn.month,moment.fn.weeks=moment.fn.week,moment.fn.isoWeeks=moment.fn.isoWeek,moment.fn.quarters=moment.fn.quarter,moment.fn.toJSON=moment.fn.toISOString,extend(moment.duration.fn=Duration.prototype,{_bubble:function(){var seconds,minutes,hours,milliseconds=this._milliseconds,days=this._days,months=this._months,data=this._data,years=0;data.milliseconds=milliseconds%1e3,seconds=absRound(milliseconds/1e3),data.seconds=seconds%60,minutes=absRound(seconds/60),data.minutes=minutes%60,hours=absRound(minutes/60),data.hours=hours%24,days+=absRound(hours/24),years=absRound(daysToYears(days)),days-=absRound(yearsToDays(years)),months+=absRound(days/30),days%=30,years+=absRound(months/12),months%=12,data.days=days,data.months=months,data.years=years},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return absRound(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*toInt(this._months/12)},humanize:function(withSuffix){var output=relativeTime(this,!withSuffix,this.localeData());return withSuffix&&(output=this.localeData().pastFuture(+this,output)),this.localeData().postformat(output)},add:function(input,val){var dur=moment.duration(input,val);return this._milliseconds+=dur._milliseconds,this._days+=dur._days,this._months+=dur._months,this._bubble(),this},subtract:function(input,val){var dur=moment.duration(input,val);return this._milliseconds-=dur._milliseconds,this._days-=dur._days,this._months-=dur._months,this._bubble(),this},get:function(units){return units=normalizeUnits(units),this[units.toLowerCase()+"s"]()},as:function(units){var days,months;if(units=normalizeUnits(units),"month"===units||"year"===units)return days=this._days+this._milliseconds/864e5,months=this._months+12*daysToYears(days),"month"===units?months:months/12;switch(days=this._days+yearsToDays(this._months/12),units){case"week":return days/7+this._milliseconds/6048e5;case"day":return days+this._milliseconds/864e5;case"hour":return 24*days+this._milliseconds/36e5;case"minute":return 24*days*60+this._milliseconds/6e4;case"second":return 24*days*60*60+this._milliseconds/1e3;case"millisecond":return Math.floor(24*days*60*60*1e3)+this._milliseconds;default:throw new Error("Unknown unit "+units)}},lang:moment.fn.lang,locale:moment.fn.locale,toIsoString:deprecate("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var years=Math.abs(this.years()),months=Math.abs(this.months()),days=Math.abs(this.days()),hours=Math.abs(this.hours()),minutes=Math.abs(this.minutes()),seconds=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(years?years+"Y":"")+(months?months+"M":"")+(days?days+"D":"")+(hours||minutes||seconds?"T":"")+(hours?hours+"H":"")+(minutes?minutes+"M":"")+(seconds?seconds+"S":""):"P0D"},localeData:function(){return this._locale}}),moment.duration.fn.toString=moment.duration.fn.toISOString;for(i in unitMillisecondFactors)hasOwnProp(unitMillisecondFactors,i)&&makeDurationGetter(i.toLowerCase());moment.duration.fn.asMilliseconds=function(){return this.as("ms")},moment.duration.fn.asSeconds=function(){return this.as("s")},moment.duration.fn.asMinutes=function(){return this.as("m")},moment.duration.fn.asHours=function(){return this.as("h")},moment.duration.fn.asDays=function(){return this.as("d")},moment.duration.fn.asWeeks=function(){return this.as("weeks")},moment.duration.fn.asMonths=function(){return this.as("M")},moment.duration.fn.asYears=function(){return this.as("y")},moment.locale("en",{ordinal:function(number){var b=number%10,output=1===toInt(number%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return number+output}}),hasModule?module.exports=moment:"function"==typeof define&&define.amd?(define("moment",function(require,exports,module){return module.config&&module.config()&&module.config().noGlobal===!0&&(globalScope.moment=oldGlobalMoment),moment}),makeGlobal(!0)):makeGlobal()}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],52:[function(require,module){!function(define){"use strict";define(function(){function Loader(main){this.setMain(main)}function normalizeArguments(module,name,method){var bindings,regexp;if(bindings={},regexp=/^(.*)\.([^\.]*)$/,"undefined"==typeof method){if("function"!=typeof name)return{module:module,methods:name};if(module=module.match(regexp),null==module)throw new Error("Invalid module method specification in addModuleMethod");bindings[module[2]]=name,module=module[1]}else bindings[name]=method;return{module:module,methods:bindings}}function getSetProperty(root,path,property){for(Array.isArray(path)||(path=path.split("."));path.length>1;){if(!root.hasOwnProperty(path[0]))throw new Error("bad path: "+path[0]);root=root[path.shift()]}if(null==property){if(!root.hasOwnProperty(path[0]))throw new Error("bad path: "+path[0]);return root[path[0]]}if(root.hasOwnProperty(path[0]))throw new Error("Warning!!!! Trying to set existing property: "+path[0]);root[path[0]]=property}function safeMixin(obj1,obj2){Object.keys(obj2).forEach(function(key){obj1.hasOwnProperty(key)?console.error("Warning!!!! Trying to set existing property: ",key):obj1[key]=obj2[key]})}return Loader.prototype={setMain:function(newMain){this.main=newMain},requireModule:function(name){return getSetProperty(this.main,name)},addModule:function(name,obj){getSetProperty(this.main,name,obj)},requireClass:function(name){return getSetProperty(this.main,name)},addClass:function(name,obj){return getSetProperty(this.main,name,obj),this},getClass:function(name){return getSetProperty(this.main,name)},addModuleMethod:function(module,name,method){var params;return params=normalizeArguments(module,name,method),safeMixin(this.requireModule(params.module),params.methods),this},addClassMethod:function(type,name,method){var params;return params=normalizeArguments(type,name,method),safeMixin(this.getClass(params.module),params.methods),this},addInstanceMethod:function(type,name,method){var params;return params=normalizeArguments(type,name,method),safeMixin(this.getClass(params.module).prototype,params.methods),this},loadModule:function(moduleFun){moduleFun(this)}},Loader})}("function"==typeof define&&define.amd?define:function(factory){"use strict";module.exports=factory(require)})},{}],53:[function(require,module){!function(define){"use strict";define(function(require){return function(loader){var Base;return Base={},Base.Variable=require("./base/variable"),Base.List=require("./base/list"),Base.Dataset=require("./base/dataset"),loader.addClass("Variable",Base.Variable),loader.addClass("List",Base.List),loader.addClass("Dataset",Base.Dataset),loader.loadModule(require("./base/fun")),loader.loadModule(require("./base/base")),loader.loadModule(require("./base/stats")),Base}})}("function"==typeof define&&define.amd?define:function(factory){"use strict";module.exports=factory(require)})},{"./base/base":1,"./base/dataset":5,"./base/fun":6,"./base/list":7,"./base/stats":8,"./base/variable":11}]},{},[18]);